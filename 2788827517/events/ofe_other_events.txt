namespace = ofe_other

#####礼物######
country_event = {
	id = ofe_other.1
	title = ofe_other.1.name
	desc = {
		text = ofe_other.1.desc.a.materialist
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_resources_small
					has_country_flag = fe_gift_resources_large
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_materialist }
		}
	}
	desc = {
		text = ofe_other.1.desc.a.xenophile
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_resources_small
					has_country_flag = fe_gift_resources_large
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_xenophile }
		}
	}
	desc = {
		text = ofe_other.1.desc.a.spiritualist
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_resources_small
					has_country_flag = fe_gift_resources_large
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_spiritualist }
		}
	}
	desc = {
		text = ofe_other.1.desc.a.machine.o
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_resources_small
					has_country_flag = fe_gift_resources_large
				}
				NOR = {
					has_authority = auth_machine_intelligence
					has_country_flag = synthetic_empire
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_authority = auth_machine_intelligence }
		}
	}
	desc = {
		text = ofe_other.1.desc.a.machine.s
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_resources_small
					has_country_flag = fe_gift_resources_large
				}
				OR = {
					has_authority = auth_machine_intelligence
					has_country_flag = synthetic_empire
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_authority = auth_machine_intelligence }
		}
	}
	desc = {
		text = ofe_other.1.desc.b.materialist
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_databanks
					has_country_flag = fe_gift_rare_tech
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_materialist }
		}
	}
	desc = {
		text = ofe_other.1.desc.b.xenophile
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_databanks
					has_country_flag = fe_gift_rare_tech
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_xenophile }
		}
	}
	desc = {
		text = ofe_other.1.desc.b.spiritualist
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_databanks
					has_country_flag = fe_gift_rare_tech
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_spiritualist }
		}
	}
	desc = {
		text = ofe_other.1.desc.b.machine.o
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_databanks
					has_country_flag = fe_gift_rare_tech
				}
				NOR = {
					has_authority = auth_machine_intelligence
					has_country_flag = synthetic_empire
				}
		    }
			event_target:FallenEmpireTaskOrigin = { has_authority = auth_machine_intelligence }
		}
	}
	desc = {
		text = ofe_other.1.desc.b.machine.s
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_databanks
					has_country_flag = fe_gift_rare_tech
				}
				OR = {
					has_authority = auth_machine_intelligence
					has_country_flag = synthetic_empire
				}
		    }
			event_target:FallenEmpireTaskOrigin = { has_authority = auth_machine_intelligence }
		}
	}
	desc = {
		text = ofe_other.1.desc.c.materialist
		trigger = {
			from = { has_country_flag = fe_gift_escorts }
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_materialist }
		}
	}
	desc = {
		text = ofe_other.1.desc.c.xenophile
		trigger = {
			from = { has_country_flag = fe_gift_escorts }
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_xenophile }
		}
	}
	desc = {
		text = ofe_other.1.2.desc.c.spiritualist
		trigger = {
			from = { has_country_flag = fe_gift_escorts }
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_spiritualist }
		}
	}
	desc = {
		text = ofe_other.1.desc.c.machine.o
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_escorts
					has_country_flag = fe_gift_battlecruiser
				}
				NOR = {
					has_authority = auth_machine_intelligence
					has_country_flag = synthetic_empire
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_authority = auth_machine_intelligence }
		}
	}
	desc = {
		text = ofe_other.1.desc.c.machine.s
		trigger = {
			from = {
				OR = {
					has_country_flag = fe_gift_escorts
					has_country_flag = fe_gift_battlecruiser
				}
				OR = {
					has_authority = auth_machine_intelligence
					has_country_flag = synthetic_empire
				}
			}
			event_target:FallenEmpireTaskOrigin = { has_authority = auth_machine_intelligence }
		}
	}
	desc = {
		text = ofe_other.1.desc.d.materialist
		trigger = {
			from = { has_country_flag = fe_gift_battlecruiser }
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_materialist }
		}
	}
	desc = {
		text = ofe_other.1.desc.d.xenophile
		trigger = {
			from = { has_country_flag = fe_gift_battlecruiser }
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_xenophile }
		}
	}
	desc = {
		text = ofe_other.1.desc.d.spiritualist
		trigger = {
			from = { has_country_flag = fe_gift_battlecruiser }
			event_target:FallenEmpireTaskOrigin = { has_ethic = ethic_fanatic_spiritualist }
		}
	}

	picture = GFX_evt_partition
	location = from

	is_triggered_only = yes

	trigger = {
		is_country_type = fallen_empire
	}

	option = {
		name = ofe_other.1.a
		trigger = { is_fallen_machine_empire = no }
		from = {
			add_opinion_modifier = { who = prev modifier = opinion_fallen_empire_gift }
			country_event = { id = fallen_empires_tasks.2 }
		}
	}

	option = {
		name = ofe_other.1.b
		trigger = { is_fallen_machine_empire = no }
		ai_chance = { factor = 0 }
		hidden_effect = {
			from = {
				remove_country_flag = fe_gift_resources_small
				remove_country_flag = fe_gift_databanks
				remove_country_flag = fe_gift_rare_tech
				remove_country_flag = fe_gift_escorts
				remove_country_flag = fe_gift_battlecruiser
				remove_country_flag = fe_gift_resources_large
			}
		}
	}

	option = {
		name = ofe_other.1.c
		trigger = { is_fallen_machine_empire = yes }
		from = {
			add_opinion_modifier = { who = prev modifier = opinion_fallen_empire_gift }
			country_event = { id = fallen_empires_tasks.2 days = 1 }
		}
	}

	option = {
		name = ofe_other.1.d
		trigger = { is_fallen_machine_empire = yes }
		ai_chance = { factor = 0 }
		hidden_effect = {
			from = {
				remove_country_flag = fe_gift_resources_small
				remove_country_flag = fe_gift_databanks
				remove_country_flag = fe_gift_rare_tech
				remove_country_flag = fe_gift_escorts
				remove_country_flag = fe_gift_battlecruiser
				remove_country_flag = fe_gift_resources_large
			}
		}
	}
}

#####拒绝了礼物#####
country_event = {
	id = ofe_other.2
	title = ofe_other.2.name
	desc = {
		text = ofe_other.2.a.desc
		trigger = { is_fallen_machine_empire = no }
	}
	desc = {
		text = ofe_other.2.b.desc
		trigger = { is_fallen_machine_empire = yes }
	}

	picture = GFX_evt_board_meeting
	location = from

	is_triggered_only = yes

	option = {
		name = ofe_other.2.a
		trigger = { is_fallen_machine_empire = no }
	}
	option = {
		name = ofe_other.2.b
		trigger = { is_fallen_machine_empire = yes }
	}
}

#####索要人口#####
country_event = {
	id = ofe_other.3
	title = ofe_other.3.name
	desc = ofe_other.3.desc
	location = event_target:FallenEmpireTaskPlanet

	picture = GFX_evt_gaia

	is_triggered_only = yes

	immediate = {
		save_event_target_as = FallenEmpireTaskOrigin
		random_country = {
			limit = {
				num_pops > 10
				is_gestalt = no
				is_mechanical_empire = no
				is_country_type = default
				has_communications = root
				NOR = {
					has_valid_civic = civic_machine_terminator
					has_valid_civic = civic_fanatic_purifiers
				}
				NOT = { has_country_flag = fe_xenophile_asked_pop }
				is_at_war = no
				any_owned_planet = {
					num_pops > 1
					any_owned_pop = {
						is_same_species = prevprev
					}
				}
			}
			set_country_flag = fe_xenophile_asked_pop
			save_event_target_as = ofe_asked_pop
			random_owned_planet = {
				limit = {
					num_pops > 1
					any_owned_pop = {
						is_same_species = prevprev
					}
				}
				save_event_target_as = FallenEmpireTaskPlanet
			}
			country_event = { id = fallen_empires_tasks.4 days = 1 }
		}
	}

	option = {
		name = OK
	}
}

#####索要人口得到同意#####
country_event = {
	id = ofe_other.4
	title = ofe_other.4.name
	desc = ofe_other.4.desc
	location = event_target:FallenEmpireTaskPlanet

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.4.a
	}
}

#####索要人口被拒绝#####
country_event = {
	id = ofe_other.5
	title = ofe_other.5.name
	desc = ofe_other.5.desc
	location = event_target:FallenEmpireTaskPlanet

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = OK
	}
}

#####索要科学家#####
country_event = {
	id = ofe_other.6
	title = ofe_other.6.name
	desc = ofe_other.6.desc
	location = event_target:FallenEmpireTaskScientistCountry

	picture = GFX_evt_cover_blown

	is_triggered_only = yes

	immediate = {
		save_event_target_as = FallenEmpireTaskOrigin
		random_country = {
			limit = {
				num_pops > 10
		        is_country_type = default
				has_communications = root
		        NOT = { has_authority = auth_machine_intelligence }
				NOR = {
					has_valid_civic = civic_machine_terminator
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_fanatic_purifiers
				}
		        NOT = { has_country_flag = fe_materialist_asked_scientist }
		        is_at_war = no
				any_owned_leader = {
					leader_class = scientist
					has_skill > 4
				}
			}
			set_country_flag = fe_materialist_asked_scientist
			save_event_target_as = FallenEmpireTaskScientistCountry
			if = {
				limit = {
					any_owned_leader = {
						leader_class = scientist
						has_skill > 8
					}
				}
				random_owned_leader ={
					limit = {
						leader_class = scientist
						has_skill > 8
					}
					save_event_target_as = FallenEmpireScientistTarget
				}
			}
			else_if = {
				limit = {
					any_owned_leader = {
						leader_class = scientist
						has_skill > 7
					}
				}
				random_owned_leader ={
					limit = {
						leader_class = scientist
						has_skill > 7
					}
					save_event_target_as = FallenEmpireScientistTarget
				}
			}
			else_if = {
				limit = {
					any_owned_leader = {
						leader_class = scientist
						has_skill > 6
					}
				}
				random_owned_leader ={
					limit = {
						leader_class = scientist
						has_skill > 6
					}
					save_event_target_as = FallenEmpireScientistTarget
				}
			}
			else_if = {
				limit = {
					any_owned_leader = {
						leader_class = scientist
						has_skill > 5
					}
				}
				random_owned_leader ={
					limit = {
						leader_class = scientist
						has_skill > 5
					}
					save_event_target_as = FallenEmpireScientistTarget
				}
			}
			else = {
				random_owned_leader ={
					limit = {
						leader_class = scientist
						has_skill > 4
					}
					save_event_target_as = FallenEmpireScientistTarget
				}
			}
			country_event = { id = fallen_empires_tasks.22 days = 1 }
		}
	}

	option = {
		name = ofe_other.6.a
	}
}

#####索要科学家得到同意#####
country_event = {
	id = ofe_other.7
	title = ofe_other.7.name
	desc = ofe_other.7.desc
	location = event_target:FallenEmpireTaskScientistCountry

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.7.a
	}
}

#####索要科学家被拒绝#####
country_event = {
	id = ofe_other.8
	title = ofe_other.8.name
	desc = ofe_other.8.desc
	location = event_target:FallenEmpireTaskScientistCountry

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.8.a
	}
}

#####打疫苗#####
country_event = {
	id = ofe_other.9
	title = ofe_other.9.name
	desc = ofe_other.9.desc
	location = event_target:FallenEmpireAllowInoculationsCountry

	picture = GFX_evt_circuitry_modification

	is_triggered_only = yes

	immediate = {
		save_event_target_as = FallenEmpireTaskOrigin
		random_country = {
			limit = {
				NOT = { has_authority = auth_machine_intelligence }
		        is_mechanical_empire = no
		        is_country_type = default
		        NOT = { has_country_flag = fe_machine_task_1 }
		        is_at_war = no
				has_communications = root
			}
			set_country_flag = fe_machine_task_1
			save_event_target_as = FallenEmpireAllowInoculationsCountry
			country_event = { id = fallen_machine_empire.11 days = 1 }
		}
	}

	option = {
		name = ofe_other.9.a
	}
}

#####同意打疫苗#####
country_event = {
	id = ofe_other.10
	title = ofe_other.10.name
	desc = ofe_other.10.desc
	location = event_target:FallenEmpireAllowInoculationsCountry

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.10.a
	}
}

#####拒绝打疫苗#####
country_event = {
	id = ofe_other.11
	title = ofe_other.11.name
	desc = ofe_other.11.desc
	location = event_target:FallenEmpireAllowInoculationsCountry

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.11.a
	}
}

#####写代码#####
country_event = {
	id = ofe_other.12
	title = ofe_other.12.name
	desc = ofe_other.12.desc
	location = event_target:FallenEmpireAllowCodeChangesCountry

	picture = GFX_evt_robot_assembly_plant

	is_triggered_only = yes

	immediate = {
		save_event_target_as = FallenEmpireTaskOrigin
		random_country = {
			limit = {
				OR = {
					has_authority = auth_machine_intelligence
					is_mechanical_empire = yes
				}
				is_country_type = default
				NOT = { has_country_flag = fe_machine_task_2 }
				is_at_war = no
				has_communications = root
			}
			set_country_flag = fe_machine_task_2
			save_event_target_as = FallenEmpireAllowCodeChangesCountry
			country_event = { id = fallen_machine_empire.21 days = 1 }
		}
	}

	option = {
		name = ofe_other.12.a
	}
}

#####同意写代码#####
country_event = {
	id = ofe_other.13
	title = ofe_other.13.name
	desc = ofe_other.13.desc
	location = event_target:FallenEmpireAllowCodeChangesCountry

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.13.a
	}
}

#####拒绝写代码#####
country_event = {
	id = ofe_other.14
	title = ofe_other.14.name
	desc = ofe_other.14.desc
	location = event_target:FallenEmpireAllowCodeChangesCountry

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.14.a
	}
}

#####要机器人#####
country_event = {
	id = ofe_other.15
	title = ofe_other.15.name
	desc = ofe_other.15.desc
	location = event_target:FallenEmpireTaskPlanet

	picture = GFX_evt_circuitry_modification

	is_triggered_only = yes

	immediate = {
		save_event_target_as = FallenEmpireTaskOrigin
		capital_scope = {
			save_event_target_as = FallenEmpireTaskPlanetTarget
		}
		random_country = {
			limit = {
				num_pops > 10
		        has_authority = auth_machine_intelligence
		        is_country_type = default
		        NOT = { has_country_flag = fe_machine_task_3 }
		        is_at_war = no
				has_communications = root
				any_owned_planet = {
					num_pops > 1
					any_owned_pop = {
						has_trait = trait_machine_unit
					}
				}
			}
			set_country_flag = fe_machine_task_3
			random_owned_planet = {
				limit = {
					num_pops > 1
					any_owned_pop = {
						has_trait = trait_machine_unit
					}
				}
				save_event_target_as = FallenEmpireTaskPlanet
			}
			save_event_target_as = FallenEmpireProvideUnitsCountry
			country_event = { id = fallen_machine_empire.31 days = 1 }
		}
	}

	option = {
		name = ofe_other.15.a
	}
}

#####同意给机器人#####
country_event = {
	id = ofe_other.16
	title = ofe_other.16.name
	desc = ofe_other.16.desc
	location = event_target:FallenEmpireTaskPlanet

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.16.a
	}
}

#####拒绝给机器人#####
country_event = {
	id = ofe_other.17
	title = ofe_other.17.name
	desc = ofe_other.17.desc
	location = event_target:FallenEmpireTaskPlanet

	picture = GFX_evt_board_meeting

	is_triggered_only = yes

	option = {
		name = ofe_other.17.a
	}
}

#####圣地被毁#####
country_event = {
	id = ofe_other.18
	title = ofe_other.18.name
	desc = {
		text = ofe_other.18.desc.a
		trigger = {
			from = {
				is_planet_class = pc_shattered
			}
		}
	}
	desc = {
		text = ofe_other.18.desc.b
		trigger = {
			from = {
				is_planet_class = pc_shielded
			}
		}
	}
	location = from

	picture = GFX_evt_planet_beam
	show_sound = event_super_explosion

	is_triggered_only = yes

	immediate = {
		country_event = { id = ofe_other.101 days = 360 }
	}

	option = {
		name = ofe_other.18.a
	}
}

# 法令觉醒
country_event = {
	id = ofe_other.19
	title = ofe_other.19.name
	desc = ofe_other.19.desc
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	
	is_triggered_only = yes

	option = {
		name = ofe_other.19.a
	}
}

# 冒犯者被羞辱
country_event = {
	id = ofe_other.20
	title = ofe_other.20.name
	desc = ofe_other.20.desc
	picture = GFX_evt_board_meeting
	location = from
	
	is_triggered_only = yes

	option = {
		name = ofe_other.20.a
		custom_tooltip = ofe_fallen_empire_humiliating_tooltip
	}
}

# 玩家觉醒
country_event = {
	id = ofe_other.100
	title = ofe_other.100.name
	desc = ofe_other.100.desc
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	trigger = {
		NOR = {
			has_country_flag = wait_for_awaking
			has_country_flag = ofe_awaking
		}
		is_country_type = fallen_empire
		has_origin = origin_ofe_fallen_empire
		end_game_years_passed >= 0
		NOT = { has_ethic = ethic_gestalt_consciousness }
		is_at_war = no
		OR = {
			any_country = {
				is_country_type = default
				OR = {
					fleet_power > 70000
					AND = {
						has_federation = yes
						federation = {
							fleet_power > 90000
						}
					}
					any_owned_planet = {
						has_planet_flag = fallen_empire_world
					}
				}
			}
			any_country = {
				is_country_type = default
				root = { is_ai = no }
				OR = {
					fleet_power > 10000
					AND = {
						has_federation = yes
						federation = {
							fleet_power > 12000
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		years = 20
		modifier = {
			factor = 0.01
			is_ai = no
		}
		modifier = {
			factor = 0.5
			is_ai = no
			any_country = {
				is_country_type = default
				fleet_power > 20000
			}
		}
		modifier = {
			factor = 0.5
			is_ai = no
			any_country = {
				is_country_type = default
				fleet_power > 50000
			}
		}
		modifier = {
			factor = 0.5
			any_country = {
				is_country_type = default
				fleet_power > 120000
			}
		}
		modifier = {
			factor = 1.5
			num_fallen_empires > 1
			num_fallen_empires < 3
		}
		modifier = {
			factor = 2.0
			num_fallen_empires > 2
			num_fallen_empires < 4
		}
		modifier = {
			factor = 2.5
			num_fallen_empires > 3
		}
		modifier = {
			factor = 0.5
			is_ai = no
			end_game_years_passed >= 5
		}
		modifier = {
			factor = 0.1
			is_ai = no
			end_game_years_passed >= 10
		}
		modifier = {
			factor = 0.1
			any_country = {
				is_country_type = default
				any_owned_planet = {
					has_planet_flag = fallen_empire_world
					NOT = { is_original_owner = root }
				}
			}
		}
	}

	immediate = {
		set_country_flag = ofe_awaking
	}

	option = {
		name = "ofe_other.100.a"
		hidden_effect = {
			set_global_flag = sleepers_awake_happened
	
			country_event = { id = fallen_empires_awakening.3 }
	
			# Notify players
			every_country = {
				limit = {
					is_ai = no
					NOT = { is_same_value = root }
				}
				country_event = { id = fallen_empires_awakening.2 }
			}
			observer_event = { id = observer.73 }
			country_event = { id = ofe_other.101 days = 360 }
		}
	}
	option = {
		name = "ofe_other.100.b"
		ai_chance = {
			factor = 0
		}
		custom_tooltip = fallen_empire_wait_for_awaking_tooltip
		hidden_effect = {
			set_country_flag = wait_for_awaking
		}
	}
}

# 检测宿敌
country_event = {
	id = ofe_other.101
	title = OK
	desc = OK
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		any_country = {
			is_country_type = fallen_empire
			NOT = { has_ethic = ethic_gestalt_consciousness }
			NOT = { is_same_value = root }
		}
		NOT = { has_global_flag = war_in_heaven_started }
		NOT = { has_global_flag = ofe_war_in_heaven_started }
		NOT = {
			any_country = {
				has_country_flag = sleepers_awake_ancient_rival
			}
		}
	}

	immediate = {
		if = {
			limit = {
				any_country = {
					is_country_type = fallen_empire
					NOT = { has_ethic = ethic_gestalt_consciousness }
					NOT = { is_same_value = root }
					root = { is_rival = prev }
		            is_at_war = no
		            fleet_power > 20000
				}
			}
			set_country_flag = ofe_sleepers_awake_first_sleeper
			random_country = {
				limit = {
					is_country_type = fallen_empire
					NOT = { has_ethic = ethic_gestalt_consciousness }
					NOT = { is_same_value = root }
					root = { is_rival = prev }
					is_at_war = no
					fleet_power > 20000
				}
				country_event = { id = ofe_other.102 days = 180 random = 90 }
			}
		}
		else = {
			country_event = { id = ofe_other.101 days = 360 }
		}
	}
}

# 宿敌觉醒
country_event = {
	id = ofe_other.102
	title = OK
	desc = OK

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_country = {
			limit = { is_country_type = default }
			set_timed_country_flag = { flag = ai_no_wars days = 3650 }
		}
		random_country = {
			limit = {
				is_country_type = awakened_fallen_empire
				has_country_flag = ofe_sleepers_awake_first_sleeper
			}
			save_global_event_target_as = FirstSleeper
			set_timed_country_flag = { flag = ai_no_wars days = 3650 }
		}
		save_global_event_target_as = SecondSleeper
		set_global_flag = ofe_war_in_heaven_started
		set_country_flag = ofe_sleepers_awake_ancient_rival
		set_timed_country_flag = { flag = ai_no_wars days = 3650 }
		set_timed_country_flag = { flag = war_in_heaven_timer days = 730 }
		set_timed_country_flag = { flag = war_in_heaven_timer_2 days = 3650 }
		set_country_type = awakened_fallen_empire
		change_government = {
			civics = {
				civic = civic_revanchist_fervor
				civic = civic_ancient_caches_of_technology
			}
		}
		# Changing country type resets resources, so give them full stores
		add_awakened_fallen_empire_resources = yes
		add_awakened_fallen_empire_fleet = yes #also some more fleet

		add_resource = { unity = 20000 }
			
		remove_modifier = "modifier_empire_in_decline"
		remove_modifier = "modifier_lethargic_leadership"

		# Establish communications / notify
		every_country = {
			limit = {
				OR = {
					is_country_type = default
					is_country_type = fallen_empire
				}
			}
			if = {
				limit = { NOT = { has_communications = root } }
				establish_communications_no_message = root
				root = { save_event_target_as = contact_empire }
				country_event = { id = action.1 }
			}
			country_event = { id = war_in_heaven.2 }
		}
		event_target:FirstSleeper = { country_event = { id = ofe_other.103 } }
		observer_event = { id = observer.75 }
	}
}

#上古宿敌
country_event = {
	id = ofe_other.103
	title = ofe_other.103.name
	desc = ofe_other.103.desc
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal
	location = from

	is_triggered_only = yes

	immediate = {
		country_event = { id = ofe_other.104 days = 360 random = 180 }
	}

	option = {
		name = ofe_other.103.a
	}
}

#天堂之战
country_event = {
	id = ofe_other.104
	title = ofe_other.104.name
	desc = {
		text = ofe_other.104.a.desc
		trigger = {
			has_galactic_emperor = no
		}
	}
	desc = {
		text = ofe_other.104.b.desc
		trigger = {
			has_galactic_emperor = yes
		}
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	location = from

	is_triggered_only = yes

	trigger = {
		is_at_war = no
		event_target:SecondSleeper = {
			is_at_war = no
		}
	}

	immediate = {
		remove_country_flag = ai_no_wars
		event_target:SecondSleeper = {
			remove_country_flag = ai_no_wars
			declare_war = {
				target = event_target:FirstSleeper
				name = "NAME_The_War_in_Heaven"
				attacker_war_goal = "wg_war_in_heaven"
			}
		}
		set_global_flag = war_in_heaven_started
		set_global_flag = war_in_heaven_ongoing
		set_timed_global_flag = {
			flag = war_in_heaven_recently_started
			days = 5400
		}
		if = {
			limit = { has_galactic_emperor = no }
			every_country = {
				limit = {
					is_country_type = default
				}
				country_event = { id = ofe_other.105 }
			}
		}
		else = {
			every_country = {
				limit = {
					is_country_type = default
					is_galactic_community_member = yes
				}
				country_event = { id = ofe_other.106 }
			}
			every_country = {
				limit = {
					is_country_type = default
					is_galactic_community_member = no
				}
				country_event = { id = ofe_other.105 }
			}
		}
		observer_event = { id = observer.76 }
	}

	option = {
		name = ofe_other.104.a
	}
}

#共同体成员国站队
country_event = {
	id = ofe_other.105
	title = war_in_heaven.4.name
	desc = war_in_heaven.4.desc
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	location = from

	is_triggered_only = yes

	option = {
		name = ofe_other.105.a
		trigger = {
			has_been_declared_crisis = no
			is_subject = no
			NOT = {
				any_country = {
					is_country_type = awakened_fallen_empire
					is_at_war_with = prev
				}
			}
			is_country_type = default
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_machine_terminator
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_spiritualist
						root = {
							NOR = {
								has_ethic = ethic_spiritualist
								has_ethic = ethic_fanatic_spiritualist
							}
						}
					}
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_materialist
						root = {
							NOR = {
								has_ethic = ethic_materialist
								has_ethic = ethic_fanatic_materialist
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_xenophobe
						root = {
							NOR = {
								has_ethic = ethic_militarist
								has_ethic = ethic_fanatic_militarist
								has_ethic = ethic_xenophobe
								has_ethic = ethic_fanatic_xenophobe
							}
						}
					}
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_xenophile
						root = {
							NOR = {
								has_ethic = ethic_pacifist
								has_ethic = ethic_fanatic_pacifist
								has_ethic = ethic_xenophile
								has_ethic = ethic_fanatic_xenophile
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_xenophobe
						root = {
							OR = {
								has_ethic = ethic_pacifist
								has_ethic = ethic_fanatic_pacifist
								has_ethic = ethic_xenophile
								has_ethic = ethic_fanatic_xenophile
							}
						}
					}
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_xenophile
						root = {
							OR = {
								has_ethic = ethic_militarist
								has_ethic = ethic_fanatic_militarist
								has_ethic = ethic_xenophobe
								has_ethic = ethic_fanatic_xenophobe
							}
						}
					}
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_materialist
						root = {
							OR = {
								has_ethic = ethic_spiritualist
								has_ethic = ethic_fanatic_spiritualist
							}
						}
					}
					event_target:FirstSleeper = {
						has_ethic = ethic_fanatic_spiritualist
						root = {
							OR = {
								has_ethic = ethic_materialist
								has_ethic = ethic_fanatic_materialist
							}
						}
					}
				}
			}
		}
		hidden_effect = { set_country_flag = war_in_heaven_picked_side }
		if = {
			limit = {
				event_target:FirstSleeper = {
					has_ethic = ethic_fanatic_xenophobe
				}
			}
			custom_tooltip = war_in_heaven.4.a.thrall.tt
			hidden_effect = {
				set_subject_of = {
					who = event_target:FirstSleeper
					preset = preset_thrall
				}
			}
		}
		if = {
			limit = {
				event_target:FirstSleeper = {
					has_ethic = ethic_fanatic_xenophile
				}
			}
			custom_tooltip = war_in_heaven.4.a.signatory.tt
			hidden_effect = {
				set_subject_of = {
					who = event_target:FirstSleeper
					preset = preset_signatory
				}
			}
		}
		if = {
			limit = {
				event_target:FirstSleeper = {
					has_ethic = ethic_fanatic_spiritualist
				}
			}
			custom_tooltip = war_in_heaven.4.a.dominion.tt
			hidden_effect = {
				set_subject_of = {
					who = event_target:FirstSleeper
					preset = preset_dominion
				}
				shift_ethic = ethic_fanatic_spiritualist
			}
		}
		if = {
			limit = {
				event_target:FirstSleeper = {
					has_ethic = ethic_fanatic_materialist
				}
			}
			custom_tooltip = war_in_heaven.4.a.satellite.tt
			hidden_effect = {
				set_subject_of = {
					who = event_target:FirstSleeper
					preset = preset_satellite
				}
			}
		}
		hidden_effect = {
			hidden_effect = { add_opinion_modifier = { who = event_target:FirstSleeper modifier = opinion_war_in_heaven_ally } }
			event_target:FirstSleeper = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			hidden_effect = { add_opinion_modifier = { who = from modifier = opinion_war_in_heaven_enemy } }
			from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
		}
		join_war = event_target:FirstSleeper
	}
	option = {
		name = ofe_other.105.b
		trigger = {
			has_been_declared_crisis = no
			is_subject = no
			NOT = {
				any_country = {
					is_country_type = awakened_fallen_empire
					is_at_war_with = prev
				}
			}
			is_country_type = default
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_machine_terminator
				}
			}
			modifier = {
				factor = 0.2
				OR = {
					from = {
						has_ethic = ethic_fanatic_spiritualist
						root = {
							NOR = {
								has_ethic = ethic_spiritualist
								has_ethic = ethic_fanatic_spiritualist
							}
						}
					}
					from = {
						has_ethic = ethic_fanatic_materialist
						root = {
							NOR = {
								has_ethic = ethic_materialist
								has_ethic = ethic_fanatic_materialist
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					from = {
						has_ethic = ethic_fanatic_xenophobe
						root = {
							NOR = {
								has_ethic = ethic_militarist
								has_ethic = ethic_fanatic_militarist
								has_ethic = ethic_xenophobe
								has_ethic = ethic_fanatic_xenophobe
							}
						}
					}
					from = {
						has_ethic = ethic_fanatic_xenophile
						root = {
							NOR = {
								has_ethic = ethic_pacifist
								has_ethic = ethic_fanatic_pacifist
								has_ethic = ethic_xenophile
								has_ethic = ethic_fanatic_xenophile
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.1
				OR = {
					from = {
						has_ethic = ethic_fanatic_xenophobe
						root = {
							OR = {
								has_ethic = ethic_pacifist
								has_ethic = ethic_fanatic_pacifist
								has_ethic = ethic_xenophile
								has_ethic = ethic_fanatic_xenophile
							}
						}
					}
					from = {
						has_ethic = ethic_fanatic_xenophile
						root = {
							OR = {
								has_ethic = ethic_militarist
								has_ethic = ethic_fanatic_militarist
								has_ethic = ethic_xenophobe
								has_ethic = ethic_fanatic_xenophobe
							}
						}
					}
					from = {
						has_ethic = ethic_fanatic_materialist
						root = {
							OR = {
								has_ethic = ethic_spiritualist
								has_ethic = ethic_fanatic_spiritualist
							}
						}
					}
					from = {
						has_ethic = ethic_fanatic_spiritualist
						root = {
							OR = {
								has_ethic = ethic_materialist
								has_ethic = ethic_fanatic_materialist
							}
						}
					}
				}
			}
		}
		hidden_effect = { set_country_flag = war_in_heaven_picked_side }
		if = {
			limit = {
				from = {
					has_ethic = ethic_fanatic_xenophobe
				}
			}
			custom_tooltip = war_in_heaven.4.b.thrall.tt
			hidden_effect = {
				set_subject_of = {
					who = from
					preset = preset_thrall
				}
			}
		}
		if = {
			limit = {
				from = {
					has_ethic = ethic_fanatic_xenophile
				}
			}
			custom_tooltip = war_in_heaven.4.b.signatory.tt
			hidden_effect = {
				set_subject_of = {
					who = from
					preset = preset_signatory
				}
			}
		}
		if = {
			limit = {
				from = {
					has_ethic = ethic_fanatic_spiritualist
				}
			}
			custom_tooltip = war_in_heaven.4.b.dominion.tt
			hidden_effect = {
				set_subject_of = {
					who = from
					preset = preset_dominion
				}
				shift_ethic = ethic_fanatic_spiritualist
			}
		}
		if = {
			limit = {
				from = {
					has_ethic = ethic_fanatic_materialist
				}
			}
			custom_tooltip = war_in_heaven.4.b.satellite.tt
			hidden_effect = {
				set_subject_of = {
					who = from
					preset = preset_satellite
				}
			}
		}
		hidden_effect = {
			hidden_effect = { add_opinion_modifier = { who = from modifier = opinion_war_in_heaven_ally } }
			from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			hidden_effect = { add_opinion_modifier = { who = event_target:FirstSleeper modifier = opinion_war_in_heaven_enemy } }
			event_target:FirstSleeper = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
		}
		join_war = event_target:SecondSleeper
	}
	option = {
		name = ofe_other.105.c
		trigger = {
			is_subject = no
			has_been_declared_crisis = no
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				fleet_power < 25000
			}
			modifier = {
				factor = 0.5
				fleet_power < 50000
			}
			modifier = {
				factor = 2
				fleet_power > 80000
			}
			modifier = {
				factor = 2
				fleet_power > 100000
			}
			modifier = {
				factor = 2
				fleet_power > 125000
			}
			modifier = {
				factor = 5
				has_federation = yes
			}
			modifier = {
				factor = 3
				any_country = {
					is_in_federation_with = root
					fleet_power > 100000
				}
			}
			modifier = {
				factor = 2
				any_country = {
					is_ai = no
					is_in_federation_with = root
				}
			}
		}
	}
	option = {
		name = ofe_other.105.c.2
		trigger = {
			is_subject = no
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = ofe_other.105.d
		trigger = {
			is_subject = yes
		}
		if = {
			limit = { overlord = { is_country_type = awakened_fallen_empire } }
			if = {
				limit = {
					overlord = { is_same_value = event_target:FirstSleeper }
				}
				join_war = event_target:FirstSleeper
			}
			if = {
				limit = {
					overlord = { is_same_value = event_target:SecondSleeper }
				}
				join_war = event_target:SecondSleeper
			}
		}
	}
}

# 星海帝国回应
country_event = {
	id = ofe_other.106
	title = war_in_heaven.4.name
	desc = ofe_other.106.desc
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	location = from

	is_triggered_only = yes

	immediate = {
		random_playable_country = {
			limit = { is_galactic_emperor = yes }
			save_event_target_as = gal_emperor
		}
		# End existing wars
		if = {
			limit = { is_at_war = yes }
			every_war = { remove_war_participant = prev }
		}
	}

	option = {
		name = war_in_heaven.7.a
		trigger = { is_galactic_emperor = yes }
		add_imperial_authority = 100
		custom_tooltip = ofe_other.106.tooltip
		hidden_effect = {
			# Fallen Empires declare war
			every_country = {
				limit = {
					is_country_type = awakened_fallen_empire
					OR = {
						is_same_value = event_target:FirstSleeper
						is_same_value = event_target:SecondSleeper
					}
				}
				declare_war = {
					target = event_target:gal_emperor
					name = "NAME_The_War_in_Heaven"
					attacker_war_goal = "wg_war_in_heaven"
				}
				every_subject = {
					join_war = prev
				}
			}
			every_playable_country = {
				limit = {
					is_galactic_emperor = no
					is_galactic_community_member = yes
				}
				join_war = event_target:gal_emperor
			}
		}
	}
	option = {
		name = war_in_heaven.7.b
		trigger = { is_galactic_emperor = no }
		custom_tooltip = ofe_other.106.tooltip
	}
}

#不结盟组织
country_event = {
	id = ofe_other.107
	title = ofe_other.107.name
	desc = ofe_other.107.desc
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.107.a
	}
}

######玩家作为宿敌######

#玩家作为宿敌觉醒
country_event = {
	id = ofe_other.110
	title = ofe_other.110.name
	desc = ofe_other.110.desc
	picture = GFX_evt_fallen_empire
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.110.a
	}
}

#玩家作为宿敌进行天堂之战
country_event = {
	id = ofe_other.111
	title = ofe_other.111.name
	desc = {
		text = ofe_other.111.a.desc
		trigger = {
			has_galactic_emperor = no
		}
	}
	desc = {
		text = ofe_other.111.b.desc
		trigger = {
			has_galactic_emperor = yes
		}
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.111.a
	}
}

#不结盟组织
country_event = {
	id = ofe_other.112
	title = ofe_other.112.name
	desc = ofe_other.112.desc
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.112.a
	}
}

######围观天堂之战######
country_event = {
	id = ofe_other.120
	title = ofe_other.120.name
	desc = {
		text = ofe_other.120.a.desc
		trigger = {
			has_galactic_emperor = no
		}
	}
	desc = {
		text = ofe_other.120.b.desc
		trigger = {
			has_galactic_emperor = yes
		}
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.120.a
		trigger = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
	}
	option = {
		name = ofe_other.120.b
		trigger = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
	}
	option = {
		name = ofe_other.120.c
		trigger = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
	}
	option = {
		name = ofe_other.120.d
		trigger = {
			has_ethic = ethic_fanatic_materialist
		}
	}
	option = {
		name = ofe_other.120.e
		trigger = {
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	option = {
		name = ofe_other.120.f
		trigger = {
			has_ethic = ethic_fanatic_xenophile
		}
	}
	option = {
		name = ofe_other.120.g
		trigger = {
			has_ethic = ethic_fanatic_xenophobe
		}
	}
	option = {
		name = ofe_other.120.h
		trigger = {
			has_authority = auth_machine_intelligence
		}
	}
}

#不结盟组织
country_event = {
	id = ofe_other.121
	title = ofe_other.121.name
	desc = ofe_other.121.desc
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.121.a
	}
}

######星海帝国######
country_event = {
	id = ofe_other.130
	title = ofe_other.130.name
	desc = ofe_other.130.desc
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal

	is_triggered_only = yes

	option = {
		name = ofe_other.130.a
	}
}

######先辈子弟######
country_event = {
	id = ofe_other.199
	title = OK
	desc = OK

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		overlord = {
			country_event = { id = ofe_other.200 days = 3 }
		}
	}
}

country_event = {
	id = ofe_other.200
	title = TRANSMISSION
	desc = ofe_other.200.desc
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from
	}

	diplomatic = yes

	is_triggered_only = yes

	option = {
		name = ofe_other.200.a
		trigger = {
			has_ethic = ethic_fanatic_materialist
		}
	}

	option = {
		name = ofe_other.200.b
		trigger = {
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	option = {
		name = ofe_other.200.c
	}
}

#要领袖
country_event = {
	id = ofe_other.201
	title = ofe_other.201.name
	desc = ofe_other.201.desc
	picture = GFX_evt_cover_blown
	location = event_target:ScionTasked

	is_triggered_only = yes

	option = {
		name = ofe_other.201.a
		hidden_effect = {
			event_target:ScionTasked = { country_event = { id = origin.26 } }
		}
	}
	option = {
		name = ofe_other.201.b
		ai_chance = {
			factor = 0
		}
	}
}

#拒绝给领袖
country_event = {
	id = ofe_other.202
	title = ofe_other.202.name
	desc = ofe_other.202.desc
	picture = GFX_evt_board_meeting
	location = from

	is_triggered_only = yes

	option = {
		name = ofe_other.202.a
	}
	option = {
		name = ofe_other.202.b
	}
}

#送领袖
country_event = {
	id = ofe_other.203
	title = ofe_other.203.name
	desc = ofe_other.203.desc
	picture = GFX_evt_acquire_asset
	location = event_target:ScionTasked

	is_triggered_only = yes

	option = {
		name = ofe_other.203.a
		hidden_effect = {
			event_target:ScionTasked = { country_event = { id = origin.27 } }
		}
	}
	option = {
		name = ofe_other.203.b
		ai_chance = {
			factor = 0
		}
	}
}

#拒绝收人
country_event = {
	id = ofe_other.204
	title = ofe_other.204.name
	desc = ofe_other.204.desc
	picture = GFX_evt_board_meeting
	location = from

	is_triggered_only = yes

	option = {
		name = ofe_other.204.a
	}
	option = {
		name = ofe_other.204.b
	}
}

#送船
country_event = {
	id = ofe_other.205
	title = ofe_other.205.name
	desc = ofe_other.205.desc
	picture = GFX_evt_fallen_empire_awakes
	location = event_target:ScionTasked

	is_triggered_only = yes

	option = {
		name = ofe_other.205.a
		hidden_effect = {
			event_target:ScionTasked = { country_event = { id = origin.28 } }
		}
	}
	option = {
		name = ofe_other.205.b
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = ofe_other.205.c
		ai_chance = {
			factor = 0
		}
		hidden_effect = {
			capital_scope = {
				create_fleet = {
					effect = {
						set_owner = root # For ship names
						while = {
							count = 1
							create_fallen_empire_large_ship = yes
						}
						while = {
							count = 3
							create_fallen_empire_small_ship = yes
						}
						set_location = {
							target = prev
							distance = 45
							angle = random
						}
						set_owner = root
					}
				}
			}
		}
	}
}

#送船帮打
country_event = {
	id = ofe_other.206
	title = ofe_other.206.name
	desc = ofe_other.206.desc
	picture = GFX_evt_fallen_empire_awakes
	location = event_target:scion_need_help

	is_triggered_only = yes

	option = {
		name = ofe_other.206.a
		hidden_effect = {
			event_target:scion_need_help = {
				country_event = { id = origin.51 }
			}
		}
	}
	option = {
		name = ofe_other.206.b
		ai_chance = {
			factor = 0
		}
	}
}

#送的船被毁
country_event = {
	id = ofe_other.207
	title = ofe_other.207.name
	desc = ofe_other.207.desc
	picture = GFX_evt_exploding_ship
	location = from

	is_triggered_only = yes

	option = {
		name = ofe_other.207.a
	}
	option = {
		name = ofe_other.207.b
	}
}

#召回
country_event = {
	id = ofe_other.208
	title = ofe_other.208.name
	desc = ofe_other.208.desc
	picture = GFX_evt_fallen_empire_awakes
	location = from

	is_triggered_only = yes

	option = {
		name = ofe_other.208.a
	}
}

country_event = {
	id = ofe_other.300
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		from = {
			is_fallen_empire = yes
		}
	}

	immediate = {
		set_country_type = default
		create_country = {
			name_list = random
			species = root.species
			type = default
			authority = random
			civics = {
				civic = random
				civic = random
			}
			origin = origin_default
			ethos = {
				ethic = random
				ethic = random
			}
			ignore_initial_colony_error = yes
		}
		last_created_country = {
			#set_name = prev
			save_event_target_as = ofe_vassal
			add_resource = {
				minerals = 1000
				energy = 1000
				food = 1000
				consumer_goods = 500
				alloys = 250
			}
			copy_techs_from = { target = from }
			if = {
				limit = {
					from = { is_country_type = fallen_empire }
				}
				if = {
					limit = {
						from = { has_ethic = ethic_fanatic_materialist }
					}
					shift_ethic = ethic_fanatic_materialist
				}
				else_if = {
					limit = {
						from = { has_ethic = ethic_fanatic_spiritualist }
					}
					shift_ethic = ethic_fanatic_spiritualist
				}
				else_if = {
					limit = {
						from = { has_ethic = ethic_fanatic_xenophile }
					}
					shift_ethic = ethic_fanatic_xenophile
				}
				else_if = {
					limit = {
						from = { has_ethic = ethic_fanatic_xenophobe }
					}
					shift_ethic = ethic_fanatic_xenophobe
				}
				set_subject_of = {
					who = from
					preset = preset_tributary
				}
			}
			else_if = {
				limit = {
					from = { has_ethic = ethic_fanatic_materialist }
				}
				shift_ethic = ethic_fanatic_materialist
				set_subject_of = {
					who = from
					preset = preset_satellite
				}
			}
			else_if = {
				limit = {
					from = { has_ethic = ethic_fanatic_spiritualist }
				}
				shift_ethic = ethic_fanatic_spiritualist
				set_subject_of = {
					who = from
					preset = preset_dominion
				}
			}
			else_if = {
				limit = {
					from = { has_ethic = ethic_fanatic_xenophile }
				}
				shift_ethic = ethic_fanatic_xenophile
				set_subject_of = {
					who = from
					preset = preset_signatory
				}
			}
			else_if = {
				limit = {
					from = { has_ethic = ethic_fanatic_xenophobe }
				}
				shift_ethic = ethic_fanatic_xenophobe
				set_subject_of = {
					who = from
					preset = preset_thrall
				}
			}
			change_government = {
				civics = {
					civic = random
					civic = random
					civic = random
				}
			}
			add_modifier = {
				modifier = newly_released_sector_loyalty
				years = 5
			}
			random_agreement = {
				limit = {
					owner = { is_same_value = from }
					target = { is_same_value = event_target:ofe_vassal }
				}
				add_loyalty = 75
			}
			from = {
				add_intel = {
					who = event_target:ofe_vassal
					amount = 80
				}
			}
		}
		every_planet_within_border = {
			limit = {
				is_owned_by = root
			}
			set_owner = event_target:ofe_vassal
			set_controller = event_target:ofe_vassal
		}
		every_system_within_border = {
			every_fleet_in_system = {
				limit = {
					is_owned_by = root
				}
				set_owner = event_target:ofe_vassal
				set_controller = event_target:ofe_vassal
			}
		}
	}
}