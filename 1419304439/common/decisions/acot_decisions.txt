##########################################################################
# Decisions
##########################################################################

######################## UPGRADE DECISION ######################## 

# Create Awesome Palace
decision_acot_repair_fortification = {
	owned_planets_only = yes
	icon = decision_acot_repair_fortification
	
	enactment_time = 90
	prerequisites = {
		tech_planetary_defenses
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 250
		}	
	}
	
	potential = {
		OR = {
			has_modifier = acot_modifier_damaged_fortification_1
			has_modifier = acot_modifier_damaged_fortification_2
		}
		has_ground_combat = no
	}
	
	allow = {
		has_fort = yes
	}
	
	effect = {
		hidden_effect = {
			every_planet_army = {
				limit = {
					OR = {
						army_type = acot_defensive_wall
						army_type = acot_defensive_wall_dm
						army_type = acot_defensive_wall_ae
						army_type = acot_defensive_wall_se
						army_type = acot_defensive_cannon
						army_type = acot_defensive_cannon_dm
						army_type = acot_defensive_cannon_ae
						army_type = acot_defensive_cannon_se
					}
				}
				remove_army = yes
			}
		}
		IF = {
			limit = {
				has_modifier = acot_modifier_damaged_fortification_1
			}
			remove_modifier = acot_modifier_damaged_fortification_1
			add_modifier = {
				modifier = acot_modifier_fortification_1
			}
			IF = {
				limit = {
					planet_size <= 14
				}
				while = {
					count = 4
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 15
				}
				while = {
					count = 6
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 20
				}
				while = {
					count = 2
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 25
				}
				while = {
					count = 2
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 30
				}
				while = {
					count = 2
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_wall_ae
							land_army = yes
						}
					}
				}
			}
		}
		IF = {
			limit = {
				has_modifier = acot_modifier_damaged_fortification_2
			}
			add_modifier = {
				modifier = acot_modifier_fortification_2
			}
			IF = {
				limit = {
					planet_size <= 14
				}
				while = {
					count = 4
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 15
				}
				while = {
					count = 6
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 20
				}
				while = {
					count = 2
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 25
				}
				while = {
					count = 2
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_ae
							land_army = yes
						}
					}
				}
			}
			IF = {
				limit = {
					planet_size >= 30
				}
				while = {
					count = 2
					IF = {
						limit = {
							owner = {
								NOT = {
									has_technology = tech_dm_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_dm_stronghold
								NOT = {
									has_technology = tech_ae_stronghold
								}
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_dm
							land_army = yes
						}
					}
					IF = {
						limit = {
							owner = {
								has_technology = tech_ae_stronghold
							}
						}
						create_army = {
							name = army_wall_name
							owner = root.owner
							type = acot_defensive_cannon_ae
							land_army = yes
						}
					}
				}
			}
		}
		hidden_effect = {
		}
	}
	
	ai_weight = {
		weight = 100
	}
}

# Create Awesome Palace
decision_acot_upgrade_fortification = {
	owned_planets_only = yes
	icon = decision_acot_upgrade_fortification
	
	enactment_time = 180
	prerequisites = {
		tech_planetary_defenses
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 500
		}	
	}
	
	potential = {
		NOR = {
			has_modifier = acot_modifier_fortification_1
			has_modifier = acot_modifier_fortification_2
			has_modifier = acot_modifier_damaged_fortification_1
			has_modifier = acot_modifier_damaged_fortification_2
		}
	}
	
	allow = {
		has_fort = yes
	}
	
	effect = {
		add_modifier = {
			modifier = acot_modifier_fortification_1
		}
		IF = {
			limit = {
				planet_size <= 14
			}
			while = {
				count = 4
				IF = {
					limit = {
						owner = {
							NOT = {
								has_technology = tech_dm_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_dm_stronghold
							NOT = {
								has_technology = tech_ae_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_dm
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_ae_stronghold
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_ae
						species = owner.species
						land_army = yes
					}
				}
			}
		}
		IF = {
			limit = {
				planet_size >= 15
			}
			while = {
				count = 6
				IF = {
					limit = {
						owner = {
							NOT = {
								has_technology = tech_dm_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_dm_stronghold
							NOT = {
								has_technology = tech_ae_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_dm
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_ae_stronghold
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_ae
						species = owner.species
						land_army = yes
					}
				}
			}
		}
		IF = {
			limit = {
				planet_size >= 20
			}
			while = {
				count = 2
				IF = {
					limit = {
						owner = {
							NOT = {
								has_technology = tech_dm_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_dm_stronghold
							NOT = {
								has_technology = tech_ae_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_dm
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_ae_stronghold
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_ae
						species = owner.species
						land_army = yes
					}
				}
			}
		}
		IF = {
			limit = {
				planet_size >= 25
			}
			while = {
				count = 2
				IF = {
					limit = {
						owner = {
							NOT = {
								has_technology = tech_dm_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_dm_stronghold
							NOT = {
								has_technology = tech_ae_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_dm
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_ae_stronghold
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_ae
						species = owner.species
						land_army = yes
					}
				}
			}
		}
		IF = {
			limit = {
				planet_size >= 30
			}
			while = {
				count = 2
				IF = {
					limit = {
						owner = {
							NOT = {
								has_technology = tech_dm_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_dm_stronghold
							NOT = {
								has_technology = tech_ae_stronghold
							}
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_dm
						species = owner.species
						land_army = yes
					}
				}
				IF = {
					limit = {
						owner = {
							has_technology = tech_ae_stronghold
						}
					}
					create_army = {
						name = army_wall_name
						owner = root.owner
						type = acot_defensive_wall_ae
						species = owner.species
						land_army = yes
					}
				}
			}
		}
		hidden_effect = {
		}
	}
	
	ai_weight = {
		weight = 100
	}
}

decision_acot_upgrade_fortification_2 = {
	owned_planets_only = yes
	icon = decision_acot_upgrade_fortification_2
	
	enactment_time = 360
	prerequisites = {
		tech_global_defense_grid
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1500
		}	
	}
	
	potential = {
		has_modifier = acot_modifier_fortification_1
		NOR = {
			has_modifier = acot_modifier_fortification_2
			has_modifier = acot_modifier_damaged_fortification_1
			has_modifier = acot_modifier_damaged_fortification_2
		}
	}
	
	allow = {
		has_fort = yes
	}
	
	effect = {
		remove_modifier = acot_modifier_fortification_1
		add_modifier = {
			modifier = acot_modifier_fortification_2
		}
		every_planet_army = {
			limit = {
				army_type = acot_defensive_wall
			}
			modify_army = {
				name = army_wall_cannon_name
				type = acot_defensive_cannon
				#species = owner.species
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defensive_wall_dm
			}
			modify_army = {
				name = army_wall_cannon_name
				type = acot_defensive_cannon_dm
				#species = owner.species
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defensive_wall_ae
			}
			modify_army = {
				name = army_wall_cannon_name
				type = acot_defensive_cannon_ae
				#species = owner.species
			}	
		}
		hidden_effect = {
		}
	}
	
	ai_weight = {
		weight = 100
	}
}

#########################################

# Create Awesome Palace
decision_acot_upgrade_garrison_1 = {
	owned_planets_only = yes
	icon = decision_acot_upgrade_garrison_1
	
	enactment_time = 240
	prerequisites = {
		tech_planetary_defenses
	}

	resources = {
		category = armies
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 1000
			energy = 1000
		}	
	}
	
	potential = {
		NOR = {
			has_modifier = acot_modifier_defense_upgrade_1
			has_modifier = acot_modifier_defense_upgrade_2
		}
	}
	
	allow = {
	}
	
	effect = {
		add_modifier = {
			modifier = acot_modifier_defense_upgrade_1
		}
		### NORMAL
		every_planet_army = {
			limit = {
				army_type = defense_army
			}
			modify_army = {
				type = acot_defense_army_light
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_army_dm
			}
			modify_army = {
				type = acot_defense_army_light_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_army_ae
			}
			modify_army = {
				type = acot_defense_army_light_ae
			}	
		}
		### UNDEAD
		every_planet_army = {
			limit = {
				army_type = undead_defense_army
			}
			modify_army = {
				type = acot_defense_undead_light
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_undead_dm
			}
			modify_army = {
				type = acot_defense_undead_light_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_undead_ae
			}
			modify_army = {
				type = acot_defense_undead_light_ae
			}	
		}
		### ROBOT
		every_planet_army = {
			limit = {
				army_type = robotic_defense_army
			}
			modify_army = {
				type = acot_defense_robot_light
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_robot_dm
			}
			modify_army = {
				type = acot_defense_robot_light_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_robot_ae
			}
			modify_army = {
				type = acot_defense_robot_light_ae
			}	
		}
		### HIVE
		every_planet_army = {
			limit = {
				army_type = acot_hive_defense_army_1
			}
			modify_army = {
				type = acot_hive_defense_army_light_1
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_hive_defense_army_dm
			}
			modify_army = {
				type = acot_hive_defense_army_light_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_hive_defense_army_ae
			}
			modify_army = {
				type = acot_hive_defense_army_light_ae
			}	
		}
		### MACHINE BORG
		every_planet_army = {
			limit = {
				army_type = acot_army_machine_cyborg_defense
			}
			modify_army = {
				type = acot_army_machine_cyborg_defense_light
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_army_machine_cyborg_defense_dm
			}
			modify_army = {
				type = acot_army_machine_cyborg_defense_light_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_army_machine_cyborg_defense_ae
			}
			modify_army = {
				type = acot_army_machine_cyborg_defense_light_ae
			}	
		}
		### MACHINE NORMAL
		every_planet_army = {
			limit = {
				army_type = machine_defense
			}
			modify_army = {
				type = acot_defense_drone_light
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_drone_dm
			}
			modify_army = {
				type = acot_defense_drone_light_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_drone_ae
			}
			modify_army = {
				type = acot_defense_drone_light_ae
			}	
		}
		hidden_effect = {
		}
	}
	
	ai_weight = {
		weight = 100
	}
}

decision_acot_upgrade_garrison_2 = {
	owned_planets_only = yes
	icon = decision_acot_upgrade_garrison_2
	
	enactment_time = 480
	prerequisites = {
		tech_global_defense_grid
	}

	resources = {
		category = armies
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 2000
			energy = 2000
		}	
	}
	
	potential = {
		has_modifier = acot_modifier_defense_upgrade_1
		NOT = {
			has_modifier = acot_modifier_defense_upgrade_2
		}
	}
	
	allow = {
	}
	
	effect = {
		remove_modifier = acot_modifier_defense_upgrade_1
		add_modifier = {
			modifier = acot_modifier_defense_upgrade_2
		}
		### NORMAL
		every_planet_army = {
			limit = {
				army_type = acot_defense_army_light
			}
			modify_army = {
				type = acot_defense_army_heavy
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_army_light_dm
			}
			modify_army = {
				type = acot_defense_army_heavy_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_army_light_ae
			}
			modify_army = {
				type = acot_defense_army_heavy_ae
			}	
		}
		### UNDEAD
		every_planet_army = {
			limit = {
				army_type = acot_defense_undead_light
			}
			modify_army = {
				type = acot_defense_undead_heavy
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_undead_light_dm
			}
			modify_army = {
				type = acot_defense_undead_heavy_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_undead_light_ae
			}
			modify_army = {
				type = acot_defense_undead_heavy_ae
			}	
		}
		### ROBOT
		every_planet_army = {
			limit = {
				army_type = acot_defense_robot_light
			}
			modify_army = {
				type = acot_defense_robot_heavy
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_robot_light_dm
			}
			modify_army = {
				type = acot_defense_robot_heavy_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_robot_light_ae
			}
			modify_army = {
				type = acot_defense_robot_heavy_ae
			}	
		}
		### HIVE
		every_planet_army = {
			limit = {
				army_type = acot_hive_defense_army_light_1
			}
			modify_army = {
				type = acot_hive_defense_army_heavy_1
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_hive_defense_army_light_dm
			}
			modify_army = {
				type = acot_hive_defense_army_heavy_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_hive_defense_army_light_ae
			}
			modify_army = {
				type = acot_hive_defense_army_heavy_ae
			}	
		}
		### MACHINE BORG
		every_planet_army = {
			limit = {
				army_type = acot_army_machine_cyborg_defense_light
			}
			modify_army = {
				type = acot_army_machine_cyborg_defense_heavy
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_army_machine_cyborg_defense_light_dm
			}
			modify_army = {
				type = acot_army_machine_cyborg_defense_heavy_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_army_machine_cyborg_defense_light_ae
			}
			modify_army = {
				type = acot_army_machine_cyborg_defense_heavy_ae
			}	
		}
		### MACHINE NORMAL
		every_planet_army = {
			limit = {
				army_type = acot_defense_drone_light
			}
			modify_army = {
				type = acot_defense_drone_heavy
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_drone_light_dm
			}
			modify_army = {
				type = acot_defense_drone_heavy_dm
			}	
		}
		every_planet_army = {
			limit = {
				army_type = acot_defense_drone_light_ae
			}
			modify_army = {
				type = acot_defense_drone_heavy_ae
			}	
		}
		hidden_effect = {
		}
	}
	
	ai_weight = {
		weight = 100
		### NO POINT DOING THIS IF THERE IS NO FORT OR IS NOT CAPITAL
		modifier = {
			factor = 0
			OR = {
				is_capital = no
				has_fort = no	
			}
		}
	}
}

#########################################

# Create Awesome Palace
decision_transform_into_awesome = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome
	
	enactment_time = 1200
	prerequisites = {
		"tech_dm_ancient_palace"
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 5000
			influence = 100
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
		}
	}
	
	potential = {
		owner = { 
			is_regular_empire = yes 
			has_technology = tech_dm_ancient_palace
		}
		NOR = { 
			has_building = building_dm_ancient_control_center
			has_building = building_dm_ancient_palace
			has_building = building_dm_ancient_hive_cluster
			has_building = building_ae_ancient_control_center
			has_building = building_ae_ancient_palace
			has_building = building_ae_ancient_hive_cluster
		}
	}
	
	allow = {
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_building = building_colony_shelter
				 }
				 remove_building = building_colony_shelter
			}
			if = {
				limit = {
					has_building = building_capital
				 }
				 remove_building = building_capital
			}
			if = {
				limit = {
					has_building = building_major_capital
				 }
				 remove_building = building_major_capital		
			}
			if = {
				limit = {
					has_building = building_system_capital
				 }
				 remove_building = building_system_capital	
			}
			if = {
				limit = {
					has_building = building_hab_capital
				 }
				 remove_building = building_hab_capital
			}		
			if = {
				limit = {
					has_building = building_hab_major_capital
				 }
				 remove_building = building_hab_major_capital		
			}	

			if = {
				limit = {
					has_building = building_resort_capital
				 }
				 remove_building = building_resort_capital		
			}	
			if = {
				limit = {
					has_building = building_resort_major_capital
				 }
				 remove_building = building_resort_major_capital		
			}				

			if = {
				limit = {
					has_building = building_slave_capital
				 }
				 remove_building = building_slave_capital		
			}	
			if = {
				limit = {
					has_building = building_slave_major_capital
				 }
				 remove_building = building_slave_major_capital		
			}		

			if = {
				limit = {
					has_building = building_ancient_palace
				 }
				 remove_building = building_ancient_palace		
			}	

			if = {
				limit = {
					has_building = building_ancient_control_center
				 }
				 
				 remove_building = building_ancient_control_center	
			}

			add_building = building_dm_ancient_palace	
			IF = {
				limit = {
					owner = {
						is_ai = yes
					}
				}
				acot_upgrade_to_delta_building = yes
			}
		}


	}
	
	ai_weight = {
		weight = 100
	}
}


# Create Awesome Nexus
decision_transform_into_awesome_machine = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome
	
	enactment_time = 1200
	prerequisites = {
		"tech_dm_ancient_control_center"
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 5000
			influence = 100
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
		}
	}
	
	potential = {
		owner = { 
			is_machine_empire = yes 
			has_technology = tech_dm_ancient_control_center
		}
		NOR = { 
			has_building = building_dm_ancient_control_center
			has_building = building_dm_ancient_palace
			has_building = building_dm_ancient_hive_cluster
			has_building = building_ae_ancient_control_center
			has_building = building_ae_ancient_palace
			has_building = building_ae_ancient_hive_cluster
		}
	}
	
	allow = {
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_building = building_deployment_post
				 }
				 remove_building = building_deployment_post
			}
			if = {
				limit = {
					has_building = building_machine_capital
				 }
				 remove_building = building_machine_capital
			}
			if = {
				limit = {
					has_building = building_machine_major_capital
				 }
				 remove_building = building_machine_major_capital			
			}
			if = {
				limit = {
					has_building = building_machine_system_capital
				 }
				 remove_building = building_machine_system_capital			
			}
			if = {
				limit = {
					has_building = building_hab_capital
				 }
				 remove_building = building_hab_capital
			}		
			if = {
				limit = {
					has_building = building_hab_major_capital
				 }
				 remove_building = building_hab_major_capital		
			}	

			if = {
				limit = {
					has_building = building_resort_capital
				 }
				 remove_building = building_resort_capital		
			}	
			if = {
				limit = {
					has_building = building_resort_major_capital
				 }
				 remove_building = building_resort_major_capital		
			}				

			if = {
				limit = {
					has_building = building_slave_capital
				 }
				 remove_building = building_slave_capital		
			}	
			if = {
				limit = {
					has_building = building_slave_major_capital
				 }
				 remove_building = building_slave_major_capital		
			}		

			if = {
				limit = {
					has_building = building_ancient_palace
				 }
				 remove_building = building_ancient_palace		
			}	

			if = {
				limit = {
					has_building = building_ancient_control_center
				 }
				 
				 remove_building = building_ancient_control_center	
			}

			add_building = building_dm_ancient_control_center
			IF = {
				limit = {
					owner = {
						is_ai = yes
					}
				}
				acot_upgrade_to_delta_building = yes
			}			
		}


	}
	
	ai_weight = {
		weight = 100
	}
}

# Create Awesome Nexus
decision_transform_into_awesome_hive = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome
	
	enactment_time = 1200
	prerequisites = {
		"tech_dm_ancient_hive_cluster"
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 5000
			influence = 100
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
		}
	}
	
	potential = {
		owner = { 
			is_hive_empire = yes 
			has_technology = tech_dm_ancient_hive_cluster
		}
		NOR = { 
			has_building = building_dm_ancient_control_center
			has_building = building_dm_ancient_palace
			has_building = building_dm_ancient_hive_cluster
			has_building = building_ae_ancient_control_center
			has_building = building_ae_ancient_palace
			has_building = building_ae_ancient_hive_cluster
		}
	}
	
	allow = {
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_building = building_colony_shelter
				 }
				 remove_building = building_colony_shelter		
			}
			if = {
				limit = {
					has_building = building_hive_capital
				 }
				 remove_building = building_hive_capital		
			}
			if = {
				limit = {
					has_building = building_hive_major_capital
				 }
				 remove_building = building_hive_major_capital		
			}
			if = {
				limit = {
					has_building = building_hab_capital
				 }
				 remove_building = building_hab_capital
			}		
			if = {
				limit = {
					has_building = building_hab_major_capital
				 }
				 remove_building = building_hab_major_capital		
			}	

			if = {
				limit = {
					has_building = building_resort_capital
				 }
				 remove_building = building_resort_capital		
			}	
			if = {
				limit = {
					has_building = building_resort_major_capital
				 }
				 remove_building = building_resort_major_capital		
			}				

			if = {
				limit = {
					has_building = building_slave_capital
				 }
				 remove_building = building_slave_capital		
			}	
			if = {
				limit = {
					has_building = building_slave_major_capital
				 }
				 remove_building = building_slave_major_capital		
			}		

			if = {
				limit = {
					has_building = building_ancient_palace
				 }
				 remove_building = building_ancient_palace		
			}	

			if = {
				limit = {
					has_building = building_ancient_control_center
				 }
				 
				 remove_building = building_ancient_control_center	
			}

			add_building = building_dm_ancient_hive_cluster	
			IF = {
				limit = {
					owner = {
						is_ai = yes
					}
				}
				acot_upgrade_to_delta_building = yes
			}
		}


	}
	
	ai_weight = {
		weight = 100
	}
}

######################## ASCENSION UPGRADE DECISION ######################## 

decision_upgrade_gen_growth = {
	owned_planets_only = yes
	icon = decision_microscopic_life
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_clone_vats
		NOT = { has_modifier = acot_modifier_upgrade_gen_growth }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_gen_growth } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_gen_adapt = {
	owned_planets_only = yes
	icon = decision_microscopic_life
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_clone_vats
		NOT = { has_modifier = acot_modifier_upgrade_gen_adapt }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_gen_adapt } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_synth_extra_space = {
	owned_planets_only = yes
	icon = decision_cybernetics
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_synt_center
		NOT = { has_modifier = acot_modifier_upgrade_synth_extra_space }
	}
	
	effect = { 
		IF = { limit = { is_ringworld = no } add_modifier = { modifier = acot_modifier_upgrade_synth_extra_space } }
		IF = { limit = { is_ringworld = yes } add_modifier = { modifier = acot_modifier_upgrade_synth_extra_space_ringworld } }
	}
	
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_synth_assemble = {
	owned_planets_only = yes
	icon = decision_cybernetics
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_synt_center
		NOT = { has_modifier = acot_modifier_upgrade_synth_assemble }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_synth_assemble } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_psi_manipulate = {
	owned_planets_only = yes
	icon = decision_wormhole
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			unity = 5000
		}	
	}
	
	potential = {
		has_building = building_ae_psi_altar
		NOT = { has_modifier = acot_modifier_upgrade_psi_manipulate }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_psi_manipulate } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_psi_telekinesis = {
	owned_planets_only = yes
	icon = decision_wormhole
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			unity = 5000
		}	
	}
	
	potential = {
		has_building = building_ae_psi_altar
		NOT = { has_modifier = acot_modifier_upgrade_psi_telekinesis }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_psi_telekinesis } }
	
	ai_weight = {
		weight = 100
	}
}


decision_upgrade_hive_harvest = {
	owned_planets_only = yes
	icon = decision_divine_algorithm
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			food = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_hive_evochamber
		NOT = { has_modifier = acot_modifier_upgrade_hive_harvest }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_hive_harvest } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_hive_growth = {
	owned_planets_only = yes
	icon = decision_divine_algorithm
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			food = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_hive_evochamber
		NOT = { has_modifier = acot_modifier_upgrade_hive_growth }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_hive_growth } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_machine_cyberspace = {
	owned_planets_only = yes
	icon = decision_glitchy_matrix
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_machine_dome
		NOT = { has_modifier = acot_modifier_upgrade_machine_cyberspace }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_machine_cyberspace } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_machine_upkeep = {
	owned_planets_only = yes
	icon = decision_glitchy_matrix
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_machine_dome
		NOT = { has_modifier = acot_modifier_upgrade_machine_upkeep }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_machine_upkeep } }
	
	ai_weight = {
		weight = 100
	}
}


######################## SPECIAL BUILDING MENU ######################## 


decision_open_chambers_menu = {
	owned_planets_only = yes
	icon = decision_machine_sapience
	

	potential = {
		OR = {
			has_building = building_ae_clone_vats	
			has_building = building_ae_hive_evochamber	
		}	
	}
	
	allow = {
		OR = {
			has_building = building_ae_clone_vats	
			has_building = building_ae_hive_evochamber	
		}
	}
	
	effect = {
		owner = {
			country_event = {
				id = acot_special_menu.3
			}
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			owner = {
				resource_stockpile_compare = {
					resource = influence
					value <= 150		
				}
			}
		}
	}
}

# Chamber Menu
decision_open_assembly_menu = {
	owned_planets_only = yes
	icon = decision_machine_sapience


	potential = {
		OR = {
			has_building = building_ae_machine_dome	
			has_building = building_ae_synt_center
		}		
	}
	
	allow = {
		OR = {
			has_building = building_ae_machine_dome	
			has_building = building_ae_synt_center
		}
	}
	
	effect = {
		owner = {
			country_event = {
				id = acot_special_menu.4
			}
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			owner = {
				resource_stockpile_compare = {
					resource = influence
					value <= 150		
				}
			}
		}
	}
}

######################## STANDARD DECISIONS ######################## 

decision_acot_automated_building = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}

	prerequisites = {
		tech_acot_automated_systems
	}
	
	potential = {
		OR = {
			has_enigmatic_capital = yes
			has_ascended_capital = yes
		}
		NOT = { has_modifier = acot_modifier_ascended_city }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_ascended_city" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_automated_building = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_ascended_city
	}
	
	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_ascended_city
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

########################

decision_acot_supercharged_reactor = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		OR = {
			has_building = building_ae_dark_matter_generator
			has_building = building_dark_matter_generator
		}		
	}

	prerequisites = {
		tech_acot_supercharged_reactor
	}

	potential = {
		NOR = {
			is_planet_class = pc_dark_fractured
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_acot_enigmopolis
		}
		NOT = { has_modifier = acot_modifier_supercharged_reactor }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_supercharged_reactor" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_supercharged_reactor = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_supercharged_reactor
	}
	
	prerequisites = {
		tech_acot_supercharged_reactor
	}

	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_supercharged_reactor
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

########################

decision_acot_supercharged_pylon = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}
	
	prerequisites = {
		tech_acot_supercharged_pylon
	}

	allow = {
		OR = {
			has_building = building_ae_dark_energy_pylon
			has_building = building_dark_energy_pylon
		}		
	}

	potential = {
		NOR = {
			is_planet_class = pc_dark_fractured
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_acot_enigmopolis
		}
		NOT = { has_modifier = acot_modifier_supercharged_pylon }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_supercharged_pylon" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_supercharged_pylon = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_supercharged_pylon
	}

	prerequisites = {
		tech_acot_supercharged_pylon
	}
	
	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_supercharged_pylon
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

########################

decision_acot_supercharged_reactor_stellarite = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		OR = {
			has_building = building_stellarite_generator
			has_building = building_stellarite_generator_ae
		}		
	}

	prerequisites = {
		tech_acot_supercharged_reactor_stellarite
	}

	potential = {
		NOT = { has_modifier = acot_modifier_supercharged_reactor_stellarite }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_supercharged_reactor_stellarite" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_supercharged_reactor_stellarite = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_supercharged_reactor_stellarite
	}
	
	prerequisites = {
		tech_acot_supercharged_reactor_stellarite
	}


	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_supercharged_reactor_stellarite
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

######################## KILLING VOID ENEMIES ########################

decision_acot_kill_void_mutant = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_mutants
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_mutant_purge
			while = {
				count = 120
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_mutants_army
					species = event_target:phanon_operative_species
					land_army = yes
				}
			}
			random_list = {
				50 = {
					while = {
						count = 60
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_mutants_army
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
				50 = {
					while = {
						count = 6
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_mutants_hero
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_lifeform = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = this
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_lifeforms
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_fiend_purge
			while = {
				count = 80
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_fiends_army
					species = event_target:phanon_operative_species
					land_army = yes
				}
			}
			random_list = {
				50 = {
					while = {
						count = 40
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_fiends_army
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
				50 = {
					while = {
						count = 4
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_fiends_hero
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_machine = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_machines
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_machine_purge
			while = {
				count = 160
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_machine_army
					species = event_target:phanon_operative_species
					land_army = yes
				}
			}
			random_list = {
				50 = {
					while = {
						count = 80
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_machine_army
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
				50 = {
					while = {
						count = 8
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_machine_hero
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_crystal = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_sentient_crystal
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_crystal_purge
			while = {
				count = 60
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_crystal_army
					species = event_target:phanon_operative_species
					land_army = yes
				}
			}
			random_list = {
				50 = {
					while = {
						count = 30
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_crystal_army
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
				50 = {
					while = {
						count = 3
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_crystal_hero
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_flora = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_plants
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_plant_purge
			while = {
				count = 60
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_plant_army
					species = event_target:phanon_operative_species
					land_army = yes
				}
			}
			random_list = {
				50 = {
					while = {
						count = 30
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_plant_army
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
				50 = {
					while = {
						count = 3
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_plant_hero
							species = event_target:phanon_operative_species
							land_army = yes
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

######################## VOID SPHERE CREATION ######################## 

decision_transform_into_enigmatic_planet = {
	owned_planets_only = yes
	sound = choose_ascension_perk_01

	resources = {
		category = decisions
		cost = {
			energy = 500000
			minerals = 500000
			acot_sr_dark_energy = 10000
			sr_dark_matter = 10000
			influence = 200
		}
	}
	
	allow = {
		NOR = {
			has_modifier = acot_modifier_fractured_lifeforms
			has_modifier = acot_modifier_fractured_machines
			has_modifier = acot_modifier_fractured_mutants
			has_modifier = acot_modifier_fractured_plants
			has_modifier = acot_modifier_fractured_sentient_crystal
		}		
		NOR = {
			has_deposit = d_acot_void_chasm
			has_deposit = d_acot_void_terrain
			has_deposit = d_acot_void_rift
		}
	}

	prerequisites = {
		tech_acot_create_enigmatic_world
	}

	potential = {
		is_planet_class = pc_dark_fractured
		NOT = {
			has_planet_flag = has_enigmatic_planet_project
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = has_enigmatic_planet_project
			planet_event = { id = acot_planets.4 }
			enable_special_project = {
				name = ACOT_CREATE_ENIGMATIC_WORLD
				location = THIS
			}
		}
	}
	
	ai_weight = {
		weight = 100
	}
}

decision_transform_into_super_awesome = {
	owned_planets_only = yes
	sound = choose_ascension_perk_01

	resources = {
		category = decisions
		cost = {
			energy = 1000000
			minerals = 1000000
			alloys = 500000
			unity = 50000
			acot_sr_dark_energy = 20000
			sr_dark_matter = 20000
			influence = 500
		}
	}
	
	allow = {
		NOR = {
			has_modifier = acot_modifier_fractured_lifeforms
			has_modifier = acot_modifier_fractured_machines
			has_modifier = acot_modifier_fractured_mutants
			has_modifier = acot_modifier_fractured_plants
			has_modifier = acot_modifier_fractured_sentient_crystal
		}		
		NOR = {
			has_deposit = d_acot_void_chasm
			has_deposit = d_acot_void_terrain
			has_deposit = d_acot_void_rift
		}
		has_enigmatic_capital = yes
		exists = orbital_defence
		orbital_defence = {
			OR = {
				is_ship_size = acot_precusor_orbital_ring_t1
				is_ship_size = acot_precusor_orbital_ring_t2
				is_ship_size = acot_precusor_orbital_ring_t3
			}
		}
	}

	prerequisites = {
		tech_acot_create_enigmapolis
	}

	potential = {
		is_planet_class = pc_acot_enigmatic
		NOT = {
			has_planet_flag = has_enigmapolis_project
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = has_enigmapolis_project
			planet_event = { id = acot_planets.6 }
			enable_special_project = {
				name = ACOT_CREATE_ENIGMAPOLIS
				location = THIS
			}
		}
	}
	
	ai_weight = {
		weight = 200
	}
}

decision_acot_emissary_landing = {
	sound = choose_ascension_perk_01

	owned_planets_only = no

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		custom_tooltip = {
			text = acot_requires_emissary_orbit
			any_fleet_in_orbit = {
				is_ship_size = precursor_colonizer	
				owner = {
					is_same_value = from
				}
			}
		}
	}

	potential = {
		always = no
		is_a_habitable_planet_megastructure = yes
		NOT = {
			has_planet_flag = has_enigmapolis_project
		}
		solar_system = {
			any_fleet_in_system = {
				is_ship_size = precursor_colonizer		
				owner = {
					is_same_value = from
				}	
			}
		}
	}
	
	effect = {
		random_fleet_in_orbit = {
			limit = {
				is_ship_size = precursor_colonizer	
			}
			save_event_target_as = orbitting_emissary
		}
		hidden_effect = {
			IF = {
				limit = {
					has_owner = no
				}
				create_colony = {
					owner = event_target:orbitting_emissary.owner
				}
				if = {
					limit = {
						event_target:orbitting_emissary.owner = {
							is_regular_empire = yes
						}
					 }
					 remove_building = building_colony_shelter
					 add_building = building_ae_ancient_palace			
				}
				if = {
					limit = {
						event_target:orbitting_emissary.owner = {
							is_hive_empire = yes
						}
					 }
					 remove_building = building_colony_shelter
					 add_building = building_ae_ancient_hive_cluster			
				}
				if = {
					limit = {
						event_target:orbitting_emissary.owner = {
							is_machine_empire = yes
						}
					 }
					 remove_building = building_deployment_post
					 add_building = building_ae_ancient_control_center			
				}
			#### DELTA	
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_delta				
						}
					}
					while ={
						count = 5
						create_pop = {
							species = event_target:orbitting_emissary.owner.species
						}
					}
				}
			### ALPHA	
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_alpha			
						}
					}
					while ={
						count = 10
						create_pop = {
							species = event_target:orbitting_emissary.owner.species
						}
					}
				}
			#### SUGNA	
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_sigma		
						}
					}
					while ={
						count = 15
						create_pop = {
							species = event_target:orbitting_emissary.owner.species
						}
					}
				}
			#### INEGA
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_omega		
						}
					}
					while ={
						count = 20
						create_pop = {
							species = event_target:orbitting_emissary.owner.species
						}
					}
				}
			}
			### EXTRA STUFFS
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_pop
					}
				 }
				 while ={
					count = 10
					create_pop = {
					   species = event_target:orbitting_emissary.owner.species
				   }
				}
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_troop						
					}
				 }
				 while ={
					count = 10
					create_army = {
						owner = from.owner
						type = acot_garrison_army
						species = event_target:orbitting_emissary.owner.species
						land_army = yes
					}
				}
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_droid						
					}
				 }
				 while ={
					count = 10
					create_army = {
						owner = event_target:orbitting_emissary.owner
						type = acot_garrison_army_droid
						species = event_target:orbitting_emissary.owner.species
						land_army = yes
					}
				}
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_giga						
					}
				 }
				 add_building = building_giga_fortress
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_lab						
					}
				 }
				 add_building = building_ae_enigmatic_lab
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_skyshield						
					}
				 }
				 add_building = building_ae_dark_energy_psg
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_nexus						
					}
				 }
				 add_building = building_ae_dark_matter_synthersizer
			}
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_extra_assembly						
					}
				 }
				 if = {
					limit = {
						event_target:orbitting_emissary.owner = {
							is_machine_empire = no
						}
					}
					add_building = building_ae_super_assembly
				}
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							is_machine_empire = yes
						}
					 }
					 add_building = building_ae_super_assembly_machine
				 }
			}
			event_target:orbitting_emissary = {
				delete_fleet = this
			}
	############## ATTACK #############################
			IF = {
				limit = {
					planet_is_hostile = yes
				}
			### DELTA ###
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_delta
						}
				 }
				 set_planet_flag = will_have_delta_emis
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = no
						 }
					  }	
					  while ={
						 count = 10
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }
				 }
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = yes
						 }
					  }
					  while ={
						 count = 10
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army_droid
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }	
				 }
			}
			### ALPHA ###
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_alpha
					}
				 }
				 set_planet_flag = will_have_alpha_emis
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = no
						 }
					  }	
					  while ={
						 count = 15
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }
				 }
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = yes
						 }
					  }
					  while ={
						 count = 15
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army_droid
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }	
				 }
			}
			### SIGMA ###
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_sigma
					}
				 }
				 set_planet_flag = will_have_sigma_emis
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = no
						 }
					  }	
					  while ={
						 count = 20
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }
				 }
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = yes
						 }
					  }
					  while ={
						 count = 20
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army_droid
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }	
				 }
			}
			### OMEGA ###
			if = {
				limit = {
					event_target:orbitting_emissary = {
						has_fleet_flag = precursor_colonizer_omega
					}
				 }
				 set_planet_flag = will_have_omega_emis
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = no
						 }
					  }	
					  while ={
						 count = 25
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }
				 }
				 if = {
					 limit = {
						event_target:orbitting_emissary.owner = {
							 is_machine_empire = yes
						 }
					  }
					  while ={
						 count = 25
						 create_army = {
							 owner = event_target:orbitting_emissary.owner
							 type = acot_garrison_army_droid
							 species = event_target:orbitting_emissary.owner.species
							 land_army = yes
						 }
					 }	
				 }
			}
				### EXTRA STUFFS
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_pop
						}
					}
					set_planet_flag = will_have_additional_pop
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_troop						
						}
					 }
					 while ={
						count = 10
						create_army = {
							owner = from.owner
							type = acot_garrison_army
							species = from.owner.species
							land_army = yes
						}
					}
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_droid						
						}
					 }
					 while ={
						count = 10
						create_army = {
							owner = from.owner
							type = acot_garrison_army_droid
							species = from.owner.species
							land_army = yes
						}
					}
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_giga						
						}
					 }
					 set_planet_flag = will_have_giga
					 while ={
						 count = 3
						 create_army = {
							 owner = from.owner
							 type = acot_garrison_army_giga
							 species = from.owner.species
							 land_army = yes
						 }
					 }
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_lab						
						}
					 }
					 set_planet_flag = will_have_lab
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_skyshield						
						}
					 }
					 set_planet_flag = will_have_psg
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_nexus						
						}
					 }
					 set_planet_flag = will_have_nexus
				}
				if = {
					limit = {
						event_target:orbitting_emissary = {
							has_fleet_flag = precursor_colonizer_extra_assembly						
						}
					 }
					 set_planet_flag = will_have_assembly
				}
				event_target:orbitting_emissary = {
					delete_fleet = this
				}
			}
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_gigafortress_deploy = {
	sound = choose_ascension_perk_01

	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
		}
	}
	
	prerequisites = {
		tech_giga_fortress
	}

	enactment_time = 30

	allow = {
	}

	potential = {
		OR = {
			has_building = building_giga_fortress
			has_building = building_giga_fortress_fe
			has_building = building_giga_fortress_array
			has_building = building_giga_fortress_lab
			has_building = building_giga_fortress_obelisk
		}
	}
	
	effect = {
		hidden_effect = {
			create_fleet = {
				effect = {
					set_owner = from.owner
					create_ship = {
						name = random
						random_existing_design = acot_giga_fortress
						graphical_culture = from.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}
				}
			}
			IF = {
				limit = {
					has_building = building_giga_fortress
				}
				remove_building = building_giga_fortress
			}
			IF = {
				limit = {
					has_building = building_giga_fortress_fe
				}
				remove_building = building_giga_fortress_fe
			}
			IF = {
				limit = {
					has_building = building_giga_fortress_array
				}
				remove_building = building_giga_fortress_array
				last_created_fleet = {
					set_fleet_flag = acot_gigafortress_array
				}
			}
			IF = {
				limit = {
					has_building = building_giga_fortress_lab
				}
				remove_building = building_giga_fortress_lab
				last_created_fleet = {
					set_fleet_flag = acot_gigafortress_lab
				}
			}
			IF = {
				limit = {
					has_building = building_giga_fortress_obelisk
				}
				remove_building = building_giga_fortress_obelisk
				last_created_fleet = {
					set_fleet_flag = acot_gigafortress_obelisk
				}
			}
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_gigafortress_land = {
	sound = choose_ascension_perk_01

	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
		}
	}

	prerequisites = {
		tech_giga_fortress
	}
	
	allow = {
		custom_tooltip = {
			text = acot_requires_emissary_orbit
			any_fleet_in_orbit = {
				is_ship_size = acot_giga_fortress	
				owner = {
					is_same_value = from
				}
			}
		}
		free_building_slots >= 1
	}

	potential = {
		exists = owner
		is_a_habitable_planet_megastructure = yes
		NOR = {
			has_building = building_giga_fortress
			has_building = building_giga_fortress_fe
			has_building = building_giga_fortress_array
			has_building = building_giga_fortress_lab
			has_building = building_giga_fortress_obelisk
			has_building_construction = building_giga_fortress
			has_building_construction = building_giga_fortress_fe
			has_building_construction = building_giga_fortress_array
			has_building_construction = building_giga_fortress_lab
			has_building_construction = building_giga_fortress_obelisk
		}
		solar_system = {
			any_fleet_in_system = {
				is_ship_size = acot_giga_fortress		
				owner = {
					is_same_value = from
				}	
			}
		}
	}
	
	effect = {
		hidden_effect = {
			random_fleet_in_orbit = {
				limit = {
					is_ship_size = acot_giga_fortress	
				}
				save_event_target_as = orbitting_giga
			}
			if = {
				limit = {
					event_target:orbitting_giga = {
						NOR = {
							has_fleet_flag = acot_gigafortress_obelisk	
							has_fleet_flag = acot_gigafortress_lab	
							has_fleet_flag = acot_gigafortress_array	
						}					
					}
				 }
				add_building = building_giga_fortress
			}
			if = {
				limit = {
					event_target:orbitting_giga = {
						has_fleet_flag = acot_gigafortress_array						
					}
				 }
				add_building = building_giga_fortress_array
			}
			if = {
				limit = {
					event_target:orbitting_giga = {
						has_fleet_flag = acot_gigafortress_obelisk						
					}
				 }
				add_building = building_giga_fortress_obelisk
			}
			if = {
				limit = {
					event_target:orbitting_giga = {
						has_fleet_flag = acot_gigafortress_lab						
					}
				 }
				add_building = building_giga_fortress_lab
			}
			event_target:orbitting_giga = {
				delete_fleet = this					
			}
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

######################## Blow uo shups ######################## 

# Blow Up to Fractured World
decision_fractured_self_detonation = {
	icon = decision_planet_beam
	resources = {
		category = decisions
		cost = {
			influence = 250
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_same_value = root.owner }
			}
			influence = 500
			unity = 50000
		}
		cost = {
			trigger = {
				NOT = {
					owner = { is_same_value = root.owner }
				}
			}
			influence = 250
		}
	}
	sound = event_ai_started_01
	potential = {
		exists = space_owner
		space_owner = { is_same_value = from }
		from = {
			has_technology = tech_bombardment_ae_final
		}
		is_star = no
		is_ringworld = no
		is_moon = no
		is_artificial = no
		OR = {
			habitable_planet = yes
			is_planet_class = pc_molten
			is_planet_class = pc_toxic
			is_planet_class = pc_barren
			is_planet_class = pc_barren_cold
			is_planet_class = pc_dark_fractured
			is_planet_class = pc_nuked
			is_planet_class = pc_hive
			is_planet_class = pc_machine
			is_planet_class = pc_city
		}
		NOR = {
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_acot_enigmopolis
			is_planet_class = pc_acot_pmc_vault
		}
		NOT = {
			has_planet_flag = final_word_underway
		}
	}

	allow = {
	}

	effect = {
		hidden_effect = {
			set_planet_flag = final_word_underway
			save_event_target_as = showered_planet
			space_owner = {
				enable_special_project = {
					name = ACOT_FINAL_WORD_PLANET
					location = event_target:showered_planet
					owner = this
				}				
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Stablize World
decision_fractured_stablize = {
	icon = decision_planet_beam
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_planet_class = pc_dark_fractured_unstable				
			}
			energy = 25000
			sr_dark_matter = 2500
			acot_sr_dark_energy = 2500
		}
		cost = {
			trigger = {
				is_planet_class = pc_dark_fractured_ae			
			}
			energy = 100000
			sr_dark_matter = 10000
			acot_sr_dark_energy = 10000
		}
	}
	sound = event_yellow_alert_01

	potential = {
		exists = space_owner
		space_owner = { is_same_value = from }
		OR = {
			AND = {
				is_planet_class = pc_dark_fractured_unstable
				from = {
					has_technology = tech_acot_colonize_fractured
				}
			}
			AND = {
				is_planet_class = pc_dark_fractured_ae
				from = {
					has_technology = tech_acot_colonize_fractured_ae
				}
			}
		}
		NOT = {
			has_planet_flag = destablize_underway	
		}
	}

	show_tech_unlock_if = {
		has_technology = tech_acot_colonize_fractured
	}

	prerequisites = {
		tech_acot_colonize_fractured
	}

	allow = {
	}

	effect = {
		hidden_effect = {
			set_planet_flag = destablize_underway
			save_event_target_as = showered_planet
			space_owner = {
				enable_special_project = {
					name = ACOT_STABLIZE_PLANET
					location = event_target:showered_planet
					owner = this
				}					
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Blow Up to Fractured World
decision_stellarite_reactor_detonation = {
	icon = decision_shattered_planet
	enactment_time = 10
	resources = {
		category = decisions
		cost = {
			acot_sr_stellarite = 1000
			influence = 500
			unity = 50000
		}
	}
	sound = event_red_alert

	prerequisites = {
		tech_dark_matter_power_core_se
	}

	owned_planets_only = yes

	potential = {
		exists = owner
		owner = { is_same_value = root.owner }
		NOT = {
			has_planet_flag = acot_stellarite_discharge_authorized
		}
	}

	allow = {
		OR = {
			has_building = building_stellarite_generator
			has_building = building_stellarite_generator_ae
			has_building = building_stellarite_nexus
		}
	}

	effect = {
		custom_tooltip = decision_stellarite_reactor_detonation_effect
		hidden_effect = {
			planet_event = {
				id = stellarite_events.15
			}
		}
		# determine quality tier, set variable
	}

	ai_weight = {
		weight = 0
	}
}

################## PHANON INFILTRATION  DISABLED FOR NOW

decision_acot_infiltrate_phanon_grid = {
	owned_planets_only = yes
	sound = event_sensor_ping

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}	
		NOR = {
			has_modifier = acot_modifier_vault_delay
			has_planet_flag = ongoing_vault_infiltration
		}
		owner = {
			has_technology = tech_precursor_phanon_design_pe_1
			has_technology = tech_precursor_phanon_design_pe_2
			has_technology = tech_precursor_phanon_design_pe_3
		}
	}

	potential = {
		owner = {
			is_ai = no	
			NOT = {
				has_country_flag = acot_phanon_tech_stage_four_enabled
			}		
		}
		OR = {
			is_planet_class = pc_acot_pmc_vault
			is_same_value = event_target:acot_phanon_vault
		}
		NOT = {
			has_planet_flag = acot_vault_floor_four_cleared
		}
		has_ground_combat = no
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_vault_infiltration
			add_modifier = {
				modifier = acot_modifier_vault_delay
				days = 180
			}
			IF = {
				limit = {
					owner = {
						NOT = {
							has_country_flag = acot_phanon_tech_stage_one_enabled
						}
					}
				}
				planet_event = {
					id = acot_pmc.12
				}
			}
			IF = {
				limit = {
					owner = {
						has_country_flag = acot_phanon_tech_stage_one_enabled
						NOT = {
							has_country_flag = acot_phanon_tech_stage_two_enabled
						}
					}
				}
				planet_event = {
					id = acot_pmc.13
				}
			}
			IF = {
				limit = {
					owner = {
						has_country_flag = acot_phanon_tech_stage_two_enabled
						NOT = {
							has_country_flag = acot_phanon_tech_stage_three_enabled
						}
					}
				}
				planet_event = {
					id = acot_pmc.14
				}
			}
			IF = {
				limit = {
					owner = {
						has_country_flag = acot_phanon_tech_stage_three_enabled
						NOT = {
							has_country_flag = acot_phanon_tech_stage_four_enabled
						}
					}
				}
				planet_event = {
					id = acot_pmc.15
				}
			}
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

#################### JOBLEESS JOBOB

decision_give_foodman_job = {
	owned_planets_only = yes
	sound = event_cityscape
	icon = decision_expel_population

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_find_work
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_foodman }
	}
	
	effect = {
		custom_tooltip = decision_give_foodman_job_effect
		add_modifier = { modifier = "acot_modifier_free_foodman" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_thinker
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_give_thinker_job = {
	owned_planets_only = yes
	sound = event_cityscape
	icon = decision_surreal_visions

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_find_work
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_thinker }
	}
	
	effect = {
		custom_tooltip = decision_give_thinker_job_effect
		add_modifier = { modifier = "acot_modifier_free_thinker" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_give_reserve_job = {
	owned_planets_only = yes
	sound = event_laboratory_sound
	icon = decision_galactic_senate

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_sleep_machine
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_stasis }
	}
	
	effect = {
		custom_tooltip = decision_give_thinker_job_effect
		add_modifier = { modifier = "acot_modifier_free_stasis" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_thinker
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_ungive_job = {
	owned_planets_only = yes
	sound = event_default
	icon = decision_resources

	resources = {
		category = decisions
	}
	

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		OR = { 
			has_modifier = acot_modifier_free_foodman 
			has_modifier = acot_modifier_free_soldier 
			has_modifier = acot_modifier_free_thinker 
			has_modifier = acot_modifier_free_stasis 
		}
	}
	
	effect = {
		custom_tooltip = decision_ungive_job_effect
		hidden_effect = {
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_thinker
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

# Blow Up to Fractured World
decision_acot_deploy_world_shaper = {
	icon = decision_planet_beam
	resources = {
		category = decisions
		cost = {
		}
	}
	sound = event_ai_started_01
	potential = {
		exists = space_owner
		space_owner = { is_same_value = from }
		solar_system = {
			any_ship_in_system = {
				is_ship_size = precursor_world_shaper
				owner = {
					is_same_value = from
				}
			}
		}
	}

	allow = {
	}

	effect = {
		# determine quality tier, set variable
		hidden_effect = {	
			solar_system = {
				random_fleet_in_system = {
					limit = {
						is_ship_size = precursor_world_shaper	
					}
					solar_system = {
						spawn_megastructure = {
							type = acot_world_shaper_planet_portal
							owner = from
							orbit_angle = 0
							orbit_distance = 0
							coords_from = prev
							init_effect = {
								upgrade_megastructure_to = acot_world_shaper_planet_core
								set_owner = from
							}
						}		
					}
					delete_fleet = this
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}