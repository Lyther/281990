#########################
# Pony's Magic Technology
#########################

###############
### Society ###
###############
tech_magic_experience = {
	icon = "tech_magic_experience"
	cost = 0
	area = society
	start_tech = yes
	category = { magic }
	tier = 0
	
	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
}

tech_magic_application = {
    area = society
    icon = "tech_magic_application"
    cost = @tier1cost1
    tier = 1
    category = { magic }
    prerequisites = { "tech_magic_experience" }
    weight = @tier1weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		all_technology_research_speed = 0.05
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
    }
	
	ai_weight = {
		factor = 4
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_basic_magic_theory = {
	icon = "tech_basic_magic_theory"
	cost = @tier2cost1
	area = society
	category = { magic }
	tier = 2
	prerequisites = { "tech_magic_experience" }
	weight = @tier2weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 0
			NOR = {
				has_technology = tech_mine_rare_crystals
				has_technology = tech_rare_crystals
				has_technology = tech_crystal_planting
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_advanced_magic_theory = {
	icon = "tech_advanced_magic_theory"
	cost = @tier3cost1
	area = society
	category = { magic }
	tier = 3
	prerequisites = { "tech_basic_magic_theory" "tech_colonial_centralization" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_systemic_magic_theory = {
	icon = "tech_systemic_magic_theory"
	cost = @tier4cost1
	area = society
	category = { magic }
	tier = 4
	prerequisites = { "tech_advanced_magic_theory" "tech_galactic_administration" }
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_1 = {
    area = society
    icon = "tech_magic_1"
    cost = @tier2cost1
    tier = 2
    category = { magic }
    prerequisites = { "tech_magic_application" }
    weight = @tier2weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		army_attack_damage_mult = 0.1
		army_attack_health_mult = 0.1
		pop_government_ethic_attraction = 0.1
	}

	weight_modifier = {
        modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 1.25
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_2 = {
    area = society
	icon = "tech_magic_2"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_magic_1" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
	    army_attack_damage_mult = 0.2
		army_attack_health_mult = 0.1
	    pop_government_ethic_attraction = 0.15
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 1.25
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_3 = {
    area = society
	icon = "tech_magic_3"
	cost = @tier4cost1
	tier = 4
	category = { magic }
	prerequisites = { "tech_magic_2" }
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
	    army_attack_damage_mult = 0.5
		army_attack_health_mult = 0.2
	    pop_government_ethic_attraction = 0.2
	}
	
	weight_modifier = {
        modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 1.25
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_0 = {
    area = society
	icon = "tech_magic_0"
	cost = @repeatableTechBaseCost
	cost_per_level = @repeatableTechLevelCost
	tier = @repeatableTechTier
	category = { magic }
	levels = -1
	prerequisites = { "tech_magic_3" }
	weight = @repeatableTechWeight
	
	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
	    army_attack_damage_mult = 0.1
		army_attack_health_mult = 0.05
	}

	weight_groups = {
		repeatable
	}
	mod_weight_if_group_picked = {
		repeatable = 0.01
	}

	weight_modifier = {
		factor = @repatableTechFactor
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 1.25
	    modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_dark_magic = {
    area = society
	icon = "tech_dark_magic"
	cost = @tier5cost1
	tier = 5
	category = { magic }
	prerequisites = { "tech_magic_3" }
	weight = @tier5weight1
	is_rare = yes
	is_dangerous = yes
	
	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
	    army_attack_damage_mult = 3
		army_attack_health_mult = -0.2
	}

	weight_modifier = {
        modifier = {
			factor = 0.2
			NOR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_magic }
				has_trait_in_council = { TRAIT = leader_trait_expertise_magic_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_magic_3 }
			}
		}
		modifier = {
		    factor = 0.2
			has_ethic = ethic_materialist
		}
		modifier = {
		    factor = 0.1
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
		    factor = 2
		    has_ethic = ethic_militarist
		}
		modifier = {
		    factor = 3
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 0.1
			has_ascension_perk = ap_harmony_times
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_dark_magic }
			}
		}
	}
	
	ai_weight = {
		factor = 0.5
		modifier = {
		    factor = 0.2
			has_ethic = ethic_materialist
		}
		modifier = {
		    factor = 0.1
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
		    factor = 2
		    has_ethic = ethic_militarist
		}
		modifier = {
		    factor = 3
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = 0.1
			has_ascension_perk = ap_harmony_times
		}
	}
}

tech_portal_migration_scheme = {
	area = society
	icon = "tech_portal_migration_scheme"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_magic_experience" "tech_colonial_centralization" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		pop_resettlement_cost_mult = -0.5
	}

	weight_modifier = {
		factor = 2
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		factor = 2
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_portal_trade = {
	area = society
	icon = "tech_portal_trade"
	cost = @tier4cost1
	tier = 4
	category = { magic }
	prerequisites = { "tech_portal_migration_scheme" "tech_interstellar_economics" }
	is_rare = yes
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_portal_trade }
			}
		}
		modifier = {
			factor = 0
			num_communications < 2
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_IMP_application ={
	cost = @tier4cost3
	area = society
	icon = "tech_IMP_application"
	tier = 4
	category = { magic }
	prerequisites = { }
	weight = 20 # allows tech to show after research_all_technologies
	is_rare = yes

	prereqfor_desc = {
		custom = {
			title = "TECH_IMP_APPLICATION_TITLE"
			desc = "TECH_IMP_APPLICATION_DESCRIBE"
		}
	}

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 0
			always = yes
		}
	}

	ai_weight = {
		factor = 0
	}
}

tech_enervation_study ={
	cost = @tier4cost3
	area = society
	icon = "tech_enervation_study"
	tier = 4
	category = { magic }
	prerequisites = { }
	weight = 20 # allows tech to show after research_all_technologies
	is_rare = yes

	prereqfor_desc = {
		custom = {
			title = "TECH_ENERVATION_STUDY_TITLE"
			desc = "TECH_ENERVATION_STUDY_DESC"
		}
	}

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 0
			always = yes
		}
	}

	ai_weight = {
		factor = 0
	}
}

tech_mind_reading = {
	area = society
    icon = "tech_mind_reading"
    cost = @tier3cost3
    tier = 3
    category = { magic }
    prerequisites = { "tech_magic_experience" "tech_colonial_bureaucracy" }
    weight = @tier3weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		espionage_operation_skill_add = 1
		spy_network_daily_value_mult = 0.1
		intel_decryption_add = 1
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 0.1
			NOR = {
				is_ai = yes
				has_country_flag = first_spynetwork
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		weight = 3
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_divination = {
	area = society
    icon = "tech_divination"
    cost = @tier4cost3
    tier = 4
    category = { magic }
    prerequisites = { "tech_mind_reading" }
    weight = @tier4weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		custom_tooltip = tech_divination_tooltip
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_military_theory_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_black_opal = {
	area = society
    icon = "tech_black_opal"
    cost = @tier5cost3
    tier = 5
    category = { magic }
    prerequisites = { "tech_magic_experience" "tech_galactic_bureaucracy" }
    weight = @tier5weight3
	is_rare = yes

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	#modifier = {
	#	monthly_trades_rare_crystals_produces_add = -1
	#}

	prereqfor_desc = {
		custom = {
			title = "TECH_BLACK_OPAL_TITLE"
			desc = "TECH_BLACK_OPAL_DESCRIPTION"
		}
	}

	weight_modifier = {
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_black_opal }
			}
		}
	}

	ai_weight = {
		factor = 2
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_memory_learning = {
	area = society
	icon = "tech_memory_learning"
	cost = @repeatableTechBaseCost
	cost_per_level = @repeatableTechLevelCost
	tier = @repeatableTechTier
	category = { magic }
	levels = 5	# yes, 5. -1 is not necessary.
	prerequisites = { "tech_black_opal" }
	weight = @repeatableTechWeight
	is_rare = yes

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	#modifier = {
	#	monthly_trades_rare_crystals_produces_add = -0.5
	#	army_starting_experience_add = 2000
	#	ship_starting_experience_add = 2000
	#}

	prereqfor_desc = {
		custom = {
			title = "TECH_MEMORY_LEARNING_TITLE"
			desc = "TECH_MEMORY_LEARNING_DESCRIPTION"
		}
		custom = {
			title = "TECH_MEMORY_LEARNING_EDICT_TITLE"
			desc = "TECH_MEMORY_LEARNING_EDICT_DESC"
		}
	}

	weight_groups = {
		repeatable
	}
	mod_weight_if_group_picked = {
		repeatable = 0.01
	}

	weight_modifier = {
		factor = 0.5
		factor = @repatableTechFactor
		#modifier = {
		#	factor = 0
		#	check_variable = {
		#		which = num_tech_memory_learning
		#		value >= 5
		#	}
		#}	This is unnecessary
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_statecraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_memory_learning }
			}
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 0.1
			resource_income_compare = {
				resource = rare_crystals
				value < 1
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

###################
### Engineering ###
###################
tech_crystal_planting = {
    area = engineering
	icon = "tech_crystal_planting"
	cost = @tier2cost1
	tier = 2
	category = { magic }
	prerequisites = { "tech_magic_experience" }
	weight = @tier2weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_crystalline_caverns
						has_deposit = d_crystal_forest
						has_deposit = d_crystal_reef
						has_deposit = d_industrial_sector
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_rare_crystals_1
						has_deposit = d_rare_crystals_2
						has_deposit = d_rare_crystals_3
						has_deposit = d_rare_crystals_4
						has_deposit = d_rare_crystals_5
					}
				}	
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_technology = tech_mine_rare_crystals
				has_technology = tech_rare_crystals
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_modular_crystal_planting = {
    area = engineering
	icon = "tech_modular_crystal_planting"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_crystal_planting" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_crystal_growth = {
    area = engineering
	icon = "tech_crystal_growth"
	cost = @tier4cost1
	tier = 4
	category = { magic }
	prerequisites = { "tech_modular_crystal_planting" }
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		planet_crystal_growers_produces_mult = 0.1
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_crystal_grinding = {
    area = engineering
	icon = "tech_crystal_grinding"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_crystal_planting" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_dust_caverns
						has_deposit = d_dust_desert
						has_deposit = d_industrial_sector
					}
				}				
				any_planet_within_border = {
					OR = {
						has_deposit = d_volatile_motes_1
						has_deposit = d_volatile_motes_2
						has_deposit = d_volatile_motes_3
						has_deposit = d_volatile_motes_4
						has_deposit = d_volatile_motes_5
					}
				}	
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_technology = tech_mine_volatile_motes
				has_technology = tech_volatile_motes
			}
		}

		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_crystal_gasification = {
    area = engineering
	icon = "tech_crystal_gasification"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_crystal_planting" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 0.5
			OR = {
				any_owned_planet = {
					OR = {
						has_deposit = d_bubbling_swamp
						has_deposit = d_fuming_bog
						has_deposit = d_industrial_sector
					}
				}
				any_planet_within_border = {
					OR = {
						has_deposit = d_exotic_gases_1
						has_deposit = d_exotic_gases_2
						has_deposit = d_exotic_gases_3
						has_deposit = d_exotic_gases_4
						has_deposit = d_exotic_gases_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_technology = tech_mine_exotic_gases
				has_technology = tech_exotic_gases
			}
		}

		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

### Missile
tech_magic_missile_1 = {
    area = engineering
	icon = "tech_magic_missile_1"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_application" "tech_missiles_3" }
	is_reverse_engineerable = no
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_missiles_4
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_missiles_4
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_missile_2 = {
    area = engineering
	icon = "tech_magic_missile_2"
	cost = @tier4cost1
	tier = 4
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_missile_1" }
	is_reverse_engineerable = no
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_missiles_5
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_missiles_5
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

### Armor
tech_magic_armor_1 = {
    area = engineering
	icon = "tech_magic_armor_1"
	cost = @tier2cost2
	tier = 2
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_application" "tech_ship_armor_2" }
	is_reverse_engineerable = no
	weight = @tier2weight2

	gateway = infrastructure

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_ship_armor_3
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_ship_armor_3
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_armor_2 = {
    area = engineering
	icon = "tech_magic_armor_2"
	cost = @tier3cost2
	tier = 3
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_armor_1" }
	is_reverse_engineerable = no
	weight = @tier3weight2

	gateway = infrastructure

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_ship_armor_4
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_ship_armor_4
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_armor_3 = {
    area = engineering
	icon = "tech_magic_armor_3"
	cost = @tier4cost2
	tier = 4
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_armor_2" }
	is_reverse_engineerable = no
	weight = @tier4weight2

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_ship_armor_5
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_ship_armor_5
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

### Hull
tech_enchanting_corvette_hull = {
    area = engineering
	icon = "tech_enchanting_corvette_hull"
	cost = @tier2cost3
	tier = 2
	is_rare = yes
	category = { magic }
	prerequisites = { "tech_magic_application"  "tech_corvettes" }
	weight = @tier2weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
		custom_tooltip = tech_corvette_magic_hull_effect
	    shipsize_corvette_hull_mult = 0.15
		shipsize_offspring_corvette_hull_mult = 0.15
		shipsize_frigate_hull_mult = 0.15
		ship_shield_hardening_add = 0.025
		ship_armor_hardening_add = 0.025
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
	    modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_enchanting_corvette_hull }
			}
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
	    modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_enchanting_destroyer_hull = {
    area = engineering
	icon = "tech_enchanting_destroyer_hull"
	cost = @tier3cost1
	tier = 3
	is_rare = yes
	category = { magic }
	prerequisites = { "tech_magic_application" "tech_destroyers" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
		custom_tooltip = tech_destroyer_magic_hull_effect
	    shipsize_destroyer_hull_mult = 0.15
		shipsize_offspring_destroyer_hull_mult = 0.15
		ship_shield_hardening_add = 0.025
		ship_armor_hardening_add = 0.025
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
	    modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_enchanting_destroyer_hull }
			}
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_enchanting_cruiser_hull = {
    area = engineering
	icon = "tech_enchanting_cruiser_hull"
	cost = @tier4cost1
	tier = 4
	is_rare = yes
	category = { magic }
	prerequisites = { "tech_magic_application" "tech_cruisers" }
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
		custom_tooltip = tech_cruiser_magic_hull_effect
	    shipsize_cruiser_hull_mult = 0.15
		shipsize_offspring_cruiser_hull_mult = 0.15
		ship_shield_hardening_add = 0.025
		ship_armor_hardening_add = 0.025
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_enchanting_cruiser_hull }
			}
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_enchanting_battleship_hull = {
    area = engineering
	icon = "tech_enchanting_battleship_hull"
	cost = @tier5cost1
	tier = 5
	is_rare = yes
	category = { magic }
	prerequisites = { "tech_magic_application" "tech_battleships" }
	weight = @tier5weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
		custom_tooltip = tech_battleship_magic_hull_effect
	    shipsize_battleship_hull_mult = 0.15
		shipsize_offspring_battleship_hull_mult = 0.15
		ship_shield_hardening_add = 0.025
		ship_armor_hardening_add = 0.025
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_enchanting_battleship_hull }
			}
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_enchanting_titan_hull = {
    area = engineering
	icon = "tech_enchanting_titan_hull"
	cost = @tier5cost3
	tier = 5
	is_rare = yes
	category = { magic }
	prerequisites = { "tech_magic_application" "tech_titans" }
	weight = @tier5weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
	    shipsize_titan_hull_mult = 0.15
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_enchanting_titan_hull }
			}
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			has_tradition = tr_supremacy_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_enchanting_defense_platform_hull = {
    area = engineering
	icon = "tech_enchanting_defense_platform_hull"
	cost = @tier2cost2
	tier = 2
	is_rare = yes
	category = { magic }
	prerequisites = { "tech_magic_application" "tech_starbase_3" }
	weight = @tier2weight2

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
	    shipsize_military_station_small_hull_add = 600
	}
	
	weight_modifier = {
		factor = 3
	    modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_enchanting_defense_platform_hull }
			}
		}
	}
	
	ai_weight = {
		factor = 5
	    modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_lifting_equipment = {
	area = engineering
	icon = "tech_magic_lifting_equipment"
	cost = @tier2cost1
	tier = 2
	category = { magic }
	prerequisites = { "tech_magic_experience" }
	weight = @tier2weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
		planet_building_build_speed_mult = 0.15
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_levitation = {
	area = engineering
	icon = "tech_magic_levitation"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_magic_lifting_equipment" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	modifier = {
		megastructure_build_speed_mult = 0.15
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_clouds_city ={
	area = engineering
	icon = "tech_clouds_city"
	cost = @tier3cost1
	tier = 3
	category = { magic }
	prerequisites = { "tech_magic_experience" }
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	modifier = {
		planet_housing_mult = 0.15
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_industry_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

# Aux
tech_magic_regenerative_rune = {
	cost = @tier3cost2
	area = engineering
	icon = "tech_magic_regenerative_rune"
	tier = 3
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier3weight2
	prerequisites = { "tech_magic_application" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_invisible_rune = {
	cost = @tier3cost2
	area = engineering
	icon = "tech_invisible_rune"
	tier = 3
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier3weight2
	prerequisites = { "tech_magic_application" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
		NOT = { has_first_contact_dlc = yes }
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_invisible_rune_fc_dlc = {
	cost = @tier3cost2
	area = engineering
	icon = "tech_invisible_rune"
	tier = 3
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier3weight2
	prerequisites = { "tech_magic_application" "tech_cloaking_1" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
		has_first_contact_dlc = yes
	}

	prereqfor_desc = {
		hide_prereq_for_desc = component
		custom = {
			title = "TECH_UNLOCK_INVISIBLE_RUNE_TITLE"
			desc = "TECH_UNLOCK_INVISIBLE_RUNE_DESC"
		}
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_materials_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

### Kinetic
tech_crystal_cannon_1 = {
    cost = @tier2cost1
	area = engineering
	icon = "tech_crystal_cannon_1"
	tier = 2
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier2weight1
	prerequisites = { "tech_magic_application" "tech_mass_drivers_2" }

	gateway = kinetic_weapons

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_mass_drivers_3
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_mass_drivers_3
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_crystal_cannon_2 = {
    cost = @tier3cost1
	area = engineering
	icon = "tech_crystal_cannon_2"
	tier = 3
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier3weight1
	prerequisites = { "tech_crystal_cannon_1" }

	gateway = kinetic_weapons

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_mass_drivers_4
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_mass_drivers_4
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_crystal_cannon_3 = {
    cost = @tier4cost1
	area = engineering
	icon = "tech_crystal_cannon_3"
	tier = 4
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier4weight1
	prerequisites = { "tech_crystal_cannon_2" }

	gateway = kinetic_weapons

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_mass_drivers_5
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_mass_drivers_5
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_speed_crystal_cannon_1 = {
	cost = @tier3cost3
	area = engineering
	icon = "tech_speed_crystal_cannon_1"
	tier = 3
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier3weight3
	prerequisites = { "tech_crystal_cannon_2" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_kinetic_artillery_1
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_kinetic_artillery_1
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_speed_crystal_cannon_2 = {
	cost = @tier4cost2
	area = engineering
	icon = "tech_speed_crystal_cannon_2"
	tier = 4
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier4weight2
	prerequisites = { "tech_crystal_cannon_3" "tech_speed_crystal_cannon_1" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_kinetic_artillery_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_kinetic_artillery_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

### Strike Craft
tech_phantom_strike_craft = {
	area = engineering
	icon = "tech_phantom_strike_craft"
	cost = @tier3cost3
	tier = 3
	ai_update_type = military
	is_reverse_engineerable = no
	category = { magic }
	prerequisites = { "tech_strike_craft_1" "tech_invisible_rune" }
	weight = @tier3weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_phantom_strike_craft_fc_dlc = {
	area = engineering
	icon = "tech_phantom_strike_craft"
	cost = @tier3cost3
	tier = 3
	ai_update_type = military
	is_reverse_engineerable = no
	category = { magic }
	prerequisites = { "tech_strike_craft_1" "tech_invisible_rune_fc_dlc" }
	weight = @tier3weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_voidcraft_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

### Point-Defense
tech_crystal_point_defense ={
	area = engineering
	icon = "tech_crystal_point_defense"
	cost = @tier2cost3
	tier = 2
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_magic_application" }
	is_reverse_engineerable = no
	weight = @tier2weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_crystal_blocker = {
	area = engineering
	icon = "tech_crystal_blocker"
	cost = @tier3cost3
	tier = 3
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_crystal_point_defense" }
	is_reverse_engineerable = no
	weight = @tier3weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_propulsion_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

###############
### Physics ###
###############

### Reactors
tech_magic_power = {
    area = physics
	icon = "tech_magic_power"
	cost = @tier2cost2
	tier = 2
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_application" "tech_fusion_power" }
	is_reverse_engineerable = no
	weight = @tier2weight2
	
	gateway = power_generation

	prereqfor_desc = {
		hide_prereq_for_desc = component
		custom = {
			title = "TECH_UNLOCK_MAGIC_POWER_TITLE"
			desc = "TECH_UNLOCK_MAGIC_POWER_DESC"
		}
	}

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
	    factor = 2
		modifier = {
			factor = 2
			has_technology = tech_cold_fusion_power
		}
		modifier = {
			factor = 2
			has_technology = tech_cruisers
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
	    factor = 3
		modifier = {
			factor = 2
			has_technology = tech_cold_fusion_power
		}
		modifier = {
			factor = 2
			has_technology = tech_cruisers
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_rune_power = {
    area = physics
	icon = "tech_rune_power"
	cost = @tier3cost2
	tier = 3
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_magic_power" }
	is_reverse_engineerable = no
	weight = @tier3weight2

	gateway = power_generation

	prereqfor_desc = {
		hide_prereq_for_desc = component
		custom = {
			title = "TECH_UNLOCK_RUNE_POWER_TITLE"
			desc = "TECH_UNLOCK_RUNE_POWER_DESC"
		}
	}

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 2
			has_technology = tech_antimatter_power
		}
		modifier = {
			factor = 2
			has_technology = tech_battleships
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 2
			has_technology = tech_antimatter_power
		}
		modifier = {
			factor = 2
			has_technology = tech_battleships
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_megaspell_power = {
    area = physics
	icon = "tech_megaspell_power"
	cost = @tier4cost2
	tier = 4
	category = { magic }
	ai_update_type = all
	prerequisites = { "tech_rune_power" }
	is_reverse_engineerable = no
	weight = @tier4weight2

	gateway = power_generation

	prereqfor_desc = {
		hide_prereq_for_desc = component
		custom = {
			title = "TECH_UNLOCK_MEGASPELL_POWER_TITLE"
			desc = "TECH_UNLOCK_MEGASPELL_POWER_DESC"
		}
	}

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		factor = 2
		modifier = {
			factor = 2
			has_technology = tech_zero_point_power
		}
		modifier = {
			factor = 2
			has_technology = tech_battleships
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 3
		modifier = {
			factor = 2
			has_technology = tech_zero_point_power
		}
		modifier = {
			factor = 2
			has_technology = tech_battleships
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

# Drive
tech_magic_drive = {
    cost = @tier5cost1
	area = physics
	icon = "tech_magic_drive"
	tier = 5
	category = { magic }
	ai_update_type = all
	is_reverse_engineerable = no
	is_rare = yes
	weight = @tier5weight1
	prerequisites = { "tech_magic_application" "tech_megaspell_power" }

	feature_flags = {
		jump_method
	}

	prereqfor_desc = {
		component = {
			title = "TECH_UNLOCK_MAGIC_DRIVE_TITLE"
			desc = "TECH_UNLOCK_MAGIC_DRIVE_DESC"
		}
	}
	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
	    factor = 0.1
		modifier = {
			factor = 0.1
			NOR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_magic }
				has_trait_in_council = { TRAIT = leader_trait_expertise_magic_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_magic_3 }
				has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
				has_trait_in_council = { TRAIT = leader_trait_curator }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius }
				has_trait_in_council = { TRAIT = leader_trait_spark_of_genius_2 }
				has_trait_in_council = { TRAIT = leader_trait_maniacal }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_2 }
				has_trait_in_council = { TRAIT = leader_trait_maniacal_3 }
			}
		}
		modifier = {
			factor = 1.25
			has_tradition = tr_discovery_adopt
		}
		modifier = {
			factor = 1.5
			has_trait_in_council = { TRAIT = leader_trait_dark_magic_manipulator }
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}
		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = tech_magic_drive }
			}
		}
		modifier = {
			factor = @ap_grasp_the_void_travel_tech
			has_ascension_perk = ap_grasp_the_void
		}
	}
	
	ai_weight = {
	    factor = 20
	}
}

# Laser
tech_magic_lasers_1 = {
    cost = @tier2cost1
	area = physics
	icon = "tech_magic_lasers_1"
	tier = 2
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier2weight1
	prerequisites = { "tech_magic_application" "tech_lasers_2" }

	gateway = energy_weapons

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_lasers_3
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_lasers_3
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_lasers_2 = {
    cost = @tier3cost1
	area = physics
	icon = "tech_magic_lasers_2"
	tier = 3
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier3weight1
	prerequisites = { "tech_magic_lasers_1" }

	gateway = energy_weapons

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_lasers_4
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_lasers_4
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_lasers_3 = {
    cost = @tier4cost1
	area = physics
	icon = "tech_magic_lasers_3"
	tier = 4
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier4weight1
	prerequisites = { "tech_magic_lasers_2" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_lasers_5
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_lasers_5
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_light_of_harmony = {
	cost = @tier4cost3
	area = physics
	icon = "tech_light_of_harmony"
	tier = 4
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier4weight3
	prerequisites = { "tech_magic_application" "tech_energy_lance_1" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 0
			NOT = {
				has_country_flag = "elements_of_harmony"
			}
		}
		modifier = {
			factor = 2
			has_technology = tech_energy_lance_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_energy_lance_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_bypass_spell = {
	cost = @tier4cost3
	area = physics
	icon = "tech_bypass_spell"
	tier = 4
	category = { magic }
	ai_update_type = military
	is_reverse_engineerable = no
	weight = @tier4weight3
	prerequisites = { "tech_magic_application" "tech_energy_lance_1" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_energy_lance_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_energy_lance_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

# Titan Beam
tech_chaos_magic ={
	cost = @tier4cost2
	area = physics
	icon = "tech_chaos_magic"
	tier = 4
	category = { magic }
	ai_update_type = military
	prerequisites = { }
	is_reverse_engineerable = no
	weight = 20 # allows tech to show after research_all_technologies
	is_rare = yes

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 0
			always = yes
		}
	}

	ai_weight = {
		factor = 0
	}
}

# Shields
tech_magic_shields_1 = {
    cost = @tier2cost3
	area = physics
	icon = "tech_magic_shields_1"
	tier = 2
	category = { magic }
	ai_update_type = all
	is_reverse_engineerable = no
	weight = @tier2weight3
	prerequisites = { "tech_magic_application" "tech_shields_2" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
	    factor = 1.25
		modifier = {
			factor = 2
			has_technology = tech_shields_3
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation }
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
	    factor = 2
		modifier = {
			factor = 2
			has_technology = tech_shields_3
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_shields_2 = {
    cost = @tier3cost3
	area = physics
	icon = "tech_magic_shields_2"
	tier = 3
	category = { magic }
	ai_update_type = all
	is_reverse_engineerable = no
	weight = @tier3weight3
	prerequisites = { "tech_magic_shields_1" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
	    factor = 1.25
		modifier = {
			factor = 2
			has_technology = tech_shields_4
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation }
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
	    factor = 2
		modifier = {
			factor = 2
			has_technology = tech_shields_4
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_magic_shields_3 = {
    cost = @tier4cost3
	area = physics
	icon = "tech_magic_shields_3"
	tier = 4
	category = { magic }
	ai_update_type = all
	is_reverse_engineerable = no
	weight = @tier4weight3
	prerequisites = { "tech_magic_shields_2" }

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}
	
	weight_modifier = {
	    factor = 1.25
		modifier = {
			factor = 2
			has_technology = tech_shields_5
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation }
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_field_manipulation_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
	
	ai_weight = {
	    factor = 2
		modifier = {
			factor = 2
			has_technology = tech_shields_5
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

# Energy Torpedo
tech_balefire_bomb_launchers ={
	cost = @tier4cost2
	area = physics
	icon = "tech_balefire_bomb_launchers"
	tier = 4
	category = { magic }
	ai_update_type = military
	prerequisites = { }
	is_reverse_engineerable = no
	weight = 20 # allows tech to show after research_all_technologies
	is_rare = yes

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 0
			always = yes
		}
	}

	ai_weight = {
		factor = 0
	}
}

tech_pink_cloud_bomb_launchers = {
	cost = @tier4cost2
	area = physics
	icon = "tech_pink_cloud_bomb_launchers"
	tier = 4
	category = { magic }
	ai_update_type = military
	prerequisites = { }
	is_reverse_engineerable = no
	weight = 20
	is_rare = yes

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 0
			always = yes
		}
	}

	ai_weight = {
		factor = 0
	}
}

tech_etheron_magic_weapon_1 = {
	cost = @tier3cost3
	area = physics
	icon = "tech_etheron_magic_weapon_1"
	tier = 3
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_magic_lasers_2" }
	is_reverse_engineerable = no
	weight = @tier3weight3

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_energy_torpedoes_1
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_energy_torpedoes_1
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
	}
}

tech_etheron_magic_weapon_2 = {
	cost = @tier4cost2
	area = physics
	icon = "tech_etheron_magic_weapon_2"
	tier = 4
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_etheron_magic_weapon_1" }
	is_reverse_engineerable = no
	weight = @tier4weight2

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_energy_torpedoes_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_energy_torpedoes_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
	}
}

# Reality Spell
tech_reality_spell_1 = {
	cost = @tier2cost2
	area = physics
	icon = "tech_reality_spell_1"
	tier = 2
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_lasers_2" "tech_magic_application" }
	is_reverse_engineerable = no
	weight = @tier2weight2

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_disruptors_1
		}
		modifier = {
			factor = 0.5
			NOT = {
				has_technology = tech_magic_lasers_1
			}
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_disruptors_1
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_reality_spell_2 = {
	cost = @tier3cost1
	area = physics
	icon = "tech_reality_spell_2"
	tier = 3
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_reality_spell_1" }
	is_reverse_engineerable = no
	weight = @tier3weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_disruptors_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_disruptors_2
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}

tech_reality_spell_3 = {
	cost = @tier4cost1
	area = physics
	icon = "tech_reality_spell_3"
	tier = 4
	category = { magic }
	ai_update_type = military
	prerequisites = { "tech_reality_spell_2" }
	is_reverse_engineerable = no
	weight = @tier4weight1

	potential = {
		pmt_pony_species_trigger = yes
		is_gestalt = no
	}

	weight_modifier = {
		modifier = {
			factor = 2
			has_technology = tech_disruptors_3
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_2 }
				has_trait_in_council = { TRAIT = leader_trait_expertise_particles_3 }
			}
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 2
			has_technology = tech_disruptors_3
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 1.5
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 1.125
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 1.25
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}
