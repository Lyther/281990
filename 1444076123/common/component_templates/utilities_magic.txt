##############
#### Pony ####
##############

# Magic Coating Armor
utility_component_template = {
    key = "SMALL_MAGIC_ARMOR_1"
	size = small
	icon = "GFX_ship_part_magic_armor_1"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_s_t1_cost
			rare_crystals = @m_s_t1_rare
		}
		upkeep = {
			energy = @m_s_t1_upkeep_energy
			alloys = @m_s_t1_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_1S
	}
	
	prerequisites = { "tech_magic_armor_1" }
	component_set = "MAGIC_ARMOR_1"
	upgrades_to = "SMALL_MAGIC_ARMOR_2"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "MEDIUM_MAGIC_ARMOR_1"
	size = medium
	icon = "GFX_ship_part_magic_armor_1"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_m_t1_cost
			rare_crystals = @m_m_t1_rare
		}
		upkeep = {
			energy = @m_m_t1_upkeep_energy
			alloys = @m_m_t1_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_1M
	}
	
	prerequisites = { "tech_magic_armor_1" }
	component_set = "MAGIC_ARMOR_1"
	upgrades_to = "MEDIUM_MAGIC_ARMOR_2"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "LARGE_MAGIC_ARMOR_1"
	size = large
	icon = "GFX_ship_part_magic_armor_1"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_l_t1_cost
			rare_crystals = @m_l_t1_rare
		}
		upkeep = {
			energy = @m_l_t1_upkeep_energy
			alloys = @m_l_t1_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_1L
	}
	
	prerequisites = { "tech_magic_armor_1" }
	component_set = "MAGIC_ARMOR_1"
	upgrades_to = "LARGE_MAGIC_ARMOR_2"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Enchanting Armor
utility_component_template = {
    key = "SMALL_MAGIC_ARMOR_2"
	size = small
	icon = "GFX_ship_part_magic_armor_2"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_s_t2_cost
			rare_crystals = @m_s_t2_rare
		}
		upkeep = {
			energy = @m_s_t2_upkeep_energy
			alloys = @m_s_t2_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_2S
	}
	
	prerequisites = { "tech_magic_armor_2" }
	component_set = "MAGIC_ARMOR_2"
	upgrades_to = "SMALL_MAGIC_ARMOR_3"
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "MEDIUM_MAGIC_ARMOR_2"
	size = medium
	icon = "GFX_ship_part_magic_armor_2"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_m_t2_cost
			rare_crystals = @m_m_t2_rare
		}
		upkeep = {
			energy = @m_m_t2_upkeep_energy
			alloys = @m_m_t2_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_2M
	}
	
	prerequisites = { "tech_magic_armor_2" }
	component_set = "MAGIC_ARMOR_2"
	upgrades_to = "MEDIUM_MAGIC_ARMOR_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "LARGE_MAGIC_ARMOR_2"
	size = large
	icon = "GFX_ship_part_magic_armor_2"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_l_t2_cost
			rare_crystals = @m_l_t2_rare
		}
		upkeep = {
			energy = @m_l_t2_upkeep_energy
			alloys = @m_l_t2_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_2L
	}
	
	prerequisites = { "tech_magic_armor_2" }
	component_set = "MAGIC_ARMOR_2"
	upgrades_to = "LARGE_MAGIC_ARMOR_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Rune Armor
utility_component_template = {
    key = "SMALL_MAGIC_ARMOR_3"
	size = small
	icon = "GFX_ship_part_magic_armor_3"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_s_t3_cost
			rare_crystals = @m_s_t3_rare
		}
		upkeep = {
			energy = @m_s_t3_upkeep_energy
			alloys = @m_s_t3_upkeep_alloys
		}
	}
	modifier = {
		ship_armor_add = @MA_3S
	}
	
	prerequisites = { "tech_magic_armor_3" }
	component_set = "MAGIC_ARMOR_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "MEDIUM_MAGIC_ARMOR_3"
	size = medium
	icon = "GFX_ship_part_magic_armor_3"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_m_t3_cost
			rare_crystals = @m_m_t3_rare
		}
		upkeep = {
			energy = @m_m_t3_upkeep_energy
			alloys = @m_m_t3_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_3M
	}
	
	prerequisites = { "tech_magic_armor_3" }
	component_set = "MAGIC_ARMOR_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "LARGE_MAGIC_ARMOR_3"
	size = large
	icon = "GFX_ship_part_magic_armor_3"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = @m_l_t3_cost
			rare_crystals = @m_l_t3_rare
		}
		upkeep = {
			energy = @m_l_t3_upkeep_energy
			alloys = @m_l_t3_upkeep_alloys
		}
	}
	modifier = {
	    ship_armor_add = @MA_3L
	}
	
	prerequisites = { "tech_magic_armor_3" }
	component_set = "MAGIC_ARMOR_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Magic Drive
utility_component_template = {
    key = "MAGIC_DRIVE"
	size = small
	icon = "GFX_ship_part_magic_drive"
	icon_frame = 1
	power = -32
	resources = {
		category = ship_components
		cost = {
			alloys = 24
			rare_crystals = 0.5
		}
	}
	ftl = yes
	jumpdrive = yes
	ship_modifier = {
		ship_disengage_opportunities_add = 1
	    ship_windup_mult = -0.8
	    ship_ftl_jumpdrive_range_mult = 1
	}
	
	class_restriction = { shipclass_military shipclass_constructor shipclass_colonizer shipclass_science_ship shipclass_transport shipclass_military_special shipclass_starbase }
	prerequisites = { "tech_magic_drive" }
	component_set = "ftl_components"

	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

### Reactors

# Magic Reactors
utility_component_template = {
	key = "CORVETTE_MAGIC_REACTOR"
	size = small
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_corvette_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_corvette_cost_1
			rare_crystals = @m_corvette_rare_1
		}
		upkeep = {
			energy = 0.19
			alloys = 0.019
		}
	}
	
	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { corvette frigate colonizer lithoid_colonizer sponsored_colonizer constructor science transport crisis_corvette }
	upgrades_to = "CORVETTE_RUNE_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "DESTROYER_MAGIC_REACTOR"
	size = small
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_destroyer_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_destroyer_cost_1
			rare_crystals = @m_destroyer_rare_1
		}
		upkeep = {
			energy = 0.38
			alloys = 0.038
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { destroyer crisis_destroyer }
	upgrades_to = "DESTROYER_RUNE_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "CRUISER_MAGIC_REACTOR"
	size = small
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_cruiser_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_cruiser_cost_1
			rare_crystals = @m_cruiser_rare_1
		}
		upkeep = {
			energy = 0.76
			alloys = 0.076
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { cruiser crisis_cruiser }
	upgrades_to = "CRUISER_RUNE_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "BATTLESHIP_MAGIC_REACTOR"
	size = small
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_battleship_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_battleship_cost_1
			rare_crystals = @m_battleship_rare_1
		}
		upkeep = {
			energy = 1.52
			alloys = 0.152
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { battleship }
	upgrades_to = "BATTLESHIP_RUNE_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "TITAN_MAGIC_REACTOR"
	size = small
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_titan_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_titan_cost_1
			rare_crystals = @m_titan_rare_1
		}
		upkeep = {
			energy = 3.04
			alloys = 0.304
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { titan payback_warship }
	upgrades_to = "TITAN_RUNE_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "JUGGERNAUT_MAGIC_REACTOR"
	size = small
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_juggernaut_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_juggernaut_cost_1
			rare_crystals = @m_juggernaut_rare_1
		}
		upkeep = {
			energy = 10.64
			alloys = 1.064
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { juggernaut star_eater }
	upgrades_to = "JUGGERNAUT_RUNE_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "PLATFORM_MAGIC_REACTOR"
	size = large
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_platform_power_1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_platform_cost_1
			rare_crystals = @m_platform_rare_1
		}
		upkeep = {
			energy = 0.38
			alloys = 0.038
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	class_restriction = { shipclass_military_station }
	size_restriction = {
		military_station_small
		military_station_medium
		military_station_large
	}
	upgrades_to = "PLATFORM_RUNE_REACTOR"

	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "STARBASE_MAGIC_REACTOR"
	size = large
	icon = "GFX_ship_part_magic_reactor"
	icon_frame = 1
	power = @m_starbase_power

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	class_restriction = { shipclass_starbase }
	size_restriction = {
		starbase_outpost
		starbase_starport
		starbase_starhold
		starbase_starfortress
		starbase_citadel
		orbital_ring_tier_1
		orbital_ring_tier_2
		orbital_ring_tier_3
	}
	upgrades_to = "STARBASE_RUNE_REACTOR"
}

# Rune Reactors
utility_component_template = {
	key = "CORVETTE_RUNE_REACTOR"
	size = small
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_corvette_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_corvette_cost_2
			rare_crystals = @m_corvette_rare_2
		}
		upkeep = {
			energy = 0.24
			alloys = 0.024
		}
	}

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	size_restriction = { corvette frigate colonizer lithoid_colonizer sponsored_colonizer constructor science transport crisis_corvette }
	upgrades_to = "CORVETTE_MEGASPELL_REACTOR"
	
	ai_weight = {
		weight = 4
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "DESTROYER_RUNE_REACTOR"
	size = small
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_destroyer_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_destroyer_cost_2
			rare_crystals = @m_destroyer_rare_2
		}
		upkeep = {
			energy = 0.48
			alloys = 0.048
		}
	}

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	size_restriction = { destroyer crisis_destroyer }
	upgrades_to = "DESTROYER_MEGASPELL_REACTOR"
	
	ai_weight = {
		weight = 4
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "CRUISER_RUNE_REACTOR"
	size = small
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_cruiser_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_cruiser_cost_2
			rare_crystals = @m_cruiser_rare_2
		}
		upkeep = {
			energy = 0.96
			alloys = 0.096
		}
	}

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	size_restriction = { cruiser crisis_cruiser }
	upgrades_to = "CRUISER_MEGASPELL_REACTOR"
	
	ai_weight = {
		weight = 4
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "BATTLESHIP_RUNE_REACTOR"
	size = small
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_battleship_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_battleship_cost_2
			rare_crystals = @m_battleship_rare_2
		}
		upkeep = {
			energy = 1.92
			alloys = 0.192
		}
	}

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	size_restriction = { battleship }
	upgrades_to = "BATTLESHIP_MEGASPELL_REACTOR"
	
	ai_weight = {
		weight = 4
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "TITAN_RUNE_REACTOR"
	size = small
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_titan_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_titan_cost_2
			rare_crystals = @m_titan_rare_2
		}
		upkeep = {
			energy = 3.84
			alloys = 0.384
		}
	}

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	size_restriction = { titan payback_warship }
	upgrades_to = "TITAN_MEGASPELL_REACTOR"
	
	ai_weight = {
		weight = 4
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "JUGGERNAUT_RUNE_REACTOR"
	size = small
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_juggernaut_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_juggernaut_cost_2
			rare_crystals = @m_juggernaut_rare_2
		}
		upkeep = {
			energy = 13.44
			alloys = 1.344
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { juggernaut star_eater }
	upgrades_to = "JUGGERNAUT_MEGASPELL_REACTOR"
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "PLATFORM_RUNE_REACTOR"
	size = large
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_platform_power_2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_platform_cost_2
			rare_crystals = @m_platform_rare_2
		}
		upkeep = {
			energy = 0.48
			alloys = 0.048
		}
	}

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	class_restriction = { shipclass_military_station }
	size_restriction = {
		military_station_small
		military_station_medium
		military_station_large
	}
	upgrades_to = "PLATFORM_MEGASPELL_REACTOR"

	ai_weight = {
		weight = 4
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "STARBASE_RUNE_REACTOR"
	size = large
	icon = "GFX_ship_part_rune_reactor"
	icon_frame = 1
	power = @m_starbase_power

	prerequisites = { "tech_rune_power" }
	component_set = "power_core"
	class_restriction = { shipclass_starbase }
	size_restriction = {
		starbase_outpost
		starbase_starport
		starbase_starhold
		starbase_starfortress
		starbase_citadel
		orbital_ring_tier_1
		orbital_ring_tier_2
		orbital_ring_tier_3
	}
	upgrades_to = "STARBASE_MEGASPELL_REACTOR"
}

# Megaspell Reactors
utility_component_template = {
	key = "CORVETTE_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_corvette_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_corvette_cost_3
			rare_crystals = @m_corvette_rare_3
		}
		upkeep = {
			energy = 0.3
			alloys = 0.03
		}
	}

	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	size_restriction = { corvette frigate colonizer lithoid_colonizer sponsored_colonizer constructor science transport crisis_corvette }
	
	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "DESTROYER_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_destroyer_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_destroyer_cost_3
			rare_crystals = @m_destroyer_rare_3
		}
		upkeep = {
			energy = 0.6
			alloys = 0.06
		}
	}

	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	size_restriction = { destroyer crisis_destroyer }
	
	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "CRUISER_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_cruiser_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_cruiser_cost_3
			rare_crystals = @m_cruiser_rare_3
		}
		upkeep = {
			energy = 1.2
			alloys = 0.12
		}
	}

	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	size_restriction = { cruiser crisis_cruiser }
	
	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "BATTLESHIP_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_battleship_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_battleship_cost_3
			rare_crystals = @m_battleship_rare_3
		}
		upkeep = {
			energy = 2.4
			alloys = 0.24
		}
	}
	
	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	size_restriction = { battleship }
	
	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "TITAN_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_titan_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_titan_cost_3
			rare_crystals = @m_titan_rare_3
		}
		upkeep = {
			energy = 4.8
			alloys = 0.48
		}
	}

	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	size_restriction = { titan payback_warship }
	
	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "JUGGERNAUT_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_juggernaut_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_juggernaut_cost_3
			rare_crystals = @m_juggernaut_rare_3
		}
		upkeep = {
			energy = 16.80
			alloys = 1.680
		}
	}

	prerequisites = { "tech_magic_power" }
	component_set = "power_core"
	size_restriction = { juggernaut star_eater }
	
	ai_weight = {
		weight = 3
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "COLOSSUS_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_colossus_power

	component_set = "power_core"
	size_restriction = { colossus star_eater }

	ai_weight = {
		weight = 5
	}
}

utility_component_template = {
	key = "PLATFORM_MEGASPELL_REACTOR"
	size = large
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_platform_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_platform_cost_3
			rare_crystals = @m_platform_rare_3
		}
		upkeep = {
			energy = 0.6
			alloys = 0.06
		}
	}

	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	class_restriction = { shipclass_military_station }
	size_restriction = {
		military_station_small
		military_station_medium
		military_station_large
	}

	ai_weight = {
		weight = 5
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "ION_CANNON_MEGASPELL_REACTOR"
	size = small
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_cruiser_power_3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_cruiser_cost_3
			rare_crystals = @m_cruiser_rare_3
		}
	}

	component_set = "power_core"
	size_restriction = { ion_cannon }
	upgrades_to = "ION_CANNON_DARK_MATTER_REACTOR"

	ai_weight = {
		weight = 5
	}
}

utility_component_template = {
	key = "STARBASE_MEGASPELL_REACTOR"
	size = large
	icon = "GFX_ship_part_megaspell_reactor"
	icon_frame = 1
	power = @m_starbase_power

	prerequisites = { "tech_megaspell_power" }
	component_set = "power_core"
	class_restriction = { shipclass_starbase }
	size_restriction = {
		starbase_outpost
		starbase_starport
		starbase_starhold
		starbase_starfortress
		starbase_citadel
		orbital_ring_tier_1
		orbital_ring_tier_2
		orbital_ring_tier_3
	}
}

### Shields
# Magic Shields
utility_component_template = {
    key = "SMALL_MAGIC_SHIELD_1"
	size = small
	icon = "GFX_ship_part_magic_shield_1"
	icon_frame = 1
	power = @m_power_S1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_s_t1_cost
			rare_crystals = @m_s_t1_rare
			exotic_gases = 0.1
		}
		upkeep = {
			energy = @m_shield_s_t1_upkeep_energy
			alloys = @m_shield_s_t1_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_S1
		ship_shield_regen_add_static = @m_regen_S1
	}

	prerequisites = { "tech_magic_shields_1" }
	component_set = "MAGIC_SHIELD_1"
	upgrades_to = "SMALL_MAGIC_SHIELD_2"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "MEDIUM_MAGIC_SHIELD_1"
	size = medium
	icon = "GFX_ship_part_magic_shield_1"
	icon_frame = 1
	power = @m_power_M1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_m_t1_cost
			rare_crystals = @m_m_t1_rare
			exotic_gases = 0.2
		}
		upkeep = {
			energy = @m_shield_m_t1_upkeep_energy
			alloys = @m_shield_m_t1_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_M1
		ship_shield_regen_add_static = @m_regen_M1
	}

	prerequisites = { "tech_magic_shields_1" }
	component_set = "MAGIC_SHIELD_1"
	upgrades_to = "MEDIUM_MAGIC_SHIELD_2"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "LARGE_MAGIC_SHIELD_1"
	size = large
	icon = "GFX_ship_part_magic_shield_1"
	icon_frame = 1
	power = @m_power_L1
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_l_t1_cost
			rare_crystals = @m_l_t1_rare
			exotic_gases = 0.4
		}
		upkeep = {
			energy = @m_shield_l_t1_upkeep_energy
			alloys = @m_shield_l_t1_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_L1
		ship_shield_regen_add_static = @m_regen_L1
	}

	prerequisites = { "tech_magic_shields_1" }
	component_set = "MAGIC_SHIELD_1"
	upgrades_to = "LARGE_MAGIC_SHIELD_2"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Advanced Magic Shields
utility_component_template = {
    key = "SMALL_MAGIC_SHIELD_2"
	size = small
	icon = "GFX_ship_part_magic_shield_2"
	icon_frame = 1
	power = @m_power_S2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_s_t2_cost
			rare_crystals = @m_s_t2_rare
			exotic_gases = 0.125
		}
		upkeep = {
			energy = @m_shield_s_t2_upkeep_energy
			alloys = @m_shield_s_t2_upkeep_alloys
		}
	}
	
	modifier = {    
		ship_shield_add = @m_shield_S2
		ship_shield_regen_add_static = @m_regen_S2
	}
	
	prerequisites = { "tech_magic_shields_2" }
	component_set = "MAGIC_SHIELD_2"
	upgrades_to = "SMALL_MAGIC_SHIELD_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "MEDIUM_MAGIC_SHIELD_2"
	size = medium
	icon = "GFX_ship_part_magic_shield_2"
	icon_frame = 1
	power = @m_power_M2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_m_t2_cost
			rare_crystals = @m_m_t2_rare
			exotic_gases = 0.25
		}
		upkeep = {
			energy = @m_shield_m_t2_upkeep_energy
			alloys = @m_shield_m_t2_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_M2
		ship_shield_regen_add_static = @m_regen_M2
	}

	prerequisites = { "tech_magic_shields_2" }
	component_set = "MAGIC_SHIELD_2"
	upgrades_to = "MEDIUM_MAGIC_SHIELD_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "LARGE_MAGIC_SHIELD_2"
	size = large
	icon = "GFX_ship_part_magic_shield_2"
	icon_frame = 1
	power = @m_power_L2
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_l_t2_cost
			rare_crystals = @m_l_t2_rare
			exotic_gases = 0.5
		}
		upkeep = {
			energy = @m_shield_l_t2_upkeep_energy
			alloys = @m_shield_l_t2_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_L2
		ship_shield_regen_add_static = @m_regen_L2
	}

	prerequisites = { "tech_magic_shields_2" }
	component_set = "MAGIC_SHIELD_2"
	upgrades_to = "LARGE_MAGIC_SHIELD_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Hyper Shields
utility_component_template = {
    key = "SMALL_MAGIC_SHIELD_3"
	size = small
	icon = "GFX_ship_part_magic_shield_3"
	icon_frame = 1
	power = @m_power_S3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_s_t3_cost
			rare_crystals = @m_s_t3_rare
			exotic_gases = 0.166
		}
		upkeep = {
			energy = @m_shield_s_t3_upkeep_energy
			alloys = @m_shield_s_t3_upkeep_alloys
		}
	}


	modifier = {
	    ship_shield_add = @m_shield_S3
		ship_shield_regen_add_static = @m_regen_S3
	}

	prerequisites = { "tech_magic_shields_3" }
	component_set = "MAGIC_SHIELD_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "MEDIUM_MAGIC_SHIELD_3"
	size = medium
	icon = "GFX_ship_part_magic_shield_3"
	icon_frame = 1
	power = @m_power_M3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_m_t3_cost
			rare_crystals = @m_m_t3_rare
			exotic_gases = 0.333
		}
		upkeep = {
			energy = @m_shield_m_t3_upkeep_energy
			alloys = @m_shield_m_t3_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_M3
		ship_shield_regen_add_static = @m_regen_M3
	}

	prerequisites = { "tech_magic_shields_3" }
	component_set = "MAGIC_SHIELD_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
    key = "LARGE_MAGIC_SHIELD_3"
	size = large
	icon = "GFX_ship_part_magic_shield_3"
	icon_frame = 1
	power = @m_power_L3
	resources = {
		category = ship_components
		cost = {
			alloys = @m_shield_l_t3_cost
			rare_crystals = @m_l_t3_rare
			exotic_gases = 0.666
		}
		upkeep = {
			energy = @m_shield_l_t3_upkeep_energy
			alloys = @m_shield_l_t3_upkeep_alloys
		}
	}

	modifier = {
	    ship_shield_add = @m_shield_L3
		ship_shield_regen_add_static = @m_regen_L3
	}

	prerequisites = { "tech_magic_shields_3" }
	component_set = "MAGIC_SHIELD_3"

	ai_weight = {
		weight = 1
		modifier = {
			factor = 0.0
			has_monthly_income = { resource = exotic_gases value <= 0 }
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Magic Regenerative Rune
utility_component_template = {
	key = "MAGIC_REGENERATIVE_RUNE"
	size = aux
	icon = "GFX_ship_part_magic_regenerative_rune"
	icon_frame = 1
	power = -10
	resources = {
		category = ship_components
		cost = {
			alloys = 20
			rare_crystals = 1
		}
		upkeep = {
			energy = 0.2
			alloys = 0.05
		}
	}

	modifier = {
		ship_hull_regen_add_perc = 0.15
		ship_armor_regen_add_perc = 0.2
	}
	
	prerequisites = { tech_magic_regenerative_rune }
	component_set = "MAGIC_REGENERATIVE_RUNE"
	
	ai_weight = {
		weight = 10
		modifier = {
			factor = 2.0
			is_preferred_weapons = weapon_type_explosive
		}		
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Invisible Rune
utility_component_template = {
	key = "INVISIBLE_RUNE"
	size = aux
	icon = "GFX_ship_part_invisible_rune"
	icon_frame = 1
	power = -10
	resources = {
		category = ship_components
		cost = {
			alloys = 20
			rare_crystals = 1
		}
		upkeep = {
			energy = 0.2
			alloys = 0.05
		}
	}

	modifier = {
		ship_evasion_mult = 0.2
	}

	prerequisites = { tech_invisible_rune }
	component_set = "INVISIBLE_RUNE"

	ai_weight = {
		weight = 10
		modifier = {
			factor = 2
			OR = {
				is_preferred_weapons = weapon_type_explosive
				is_preferred_weapons = weapon_type_strike_craft
			}		
		}
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

utility_component_template = {
	key = "CORVETTE_INVISIBLE_RUNE"
	size = aux
	icon = "GFX_ship_part_invisible_rune"
	icon_frame = 1
	power = -30
	resources = {
		category = ship_components
		cost = {
			alloys = 20
			rare_crystals = 8
		}
		upkeep = {
			energy = 0.2
			alloys = 0.05
		}
	}

	modifier = {
		ship_cloaking_strength_add = 3
	}

	ship_limit = 1
	blocked_by = {
		CORVETTE_CLOAKING_1
		CORVETTE_CLOAKING_2
		CORVETTE_CLOAKING_3
		CORVETTE_CLOAKING_DARK_MATTER
		CORVETTE_CLOAKING_PSI
	}
	size_restriction = { corvette frigate crisis_corvette }
	prerequisites = { tech_invisible_rune_fc_dlc }
	component_set = "INVISIBLE_RUNE"
	ai_tags = {
		gunship_stealth
		explosive_stealth
		carrier_stealth
		screen_stealth
		artillery_stealth
		brawler_stealth
		energy_torpedoes_stealth
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 2
			OR = {
				is_preferred_weapons = weapon_type_explosive
				is_preferred_weapons = weapon_type_strike_craft
			}		
		}
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
		inline_script = ship_components/weights/roles_cloaking_devices
	}
}

utility_component_template = {
	key = "DESTROYER_INVISIBLE_RUNE"
	size = aux
	icon = "GFX_ship_part_invisible_rune"
	icon_frame = 1
	power = -30
	resources = {
		category = ship_components
		cost = {
			alloys = 20
			rare_crystals = 8
		}
		upkeep = {
			energy = 0.2
			alloys = 0.05
		}
	}

	modifier = {
		ship_cloaking_strength_add = 2
	}

	ship_limit = 1
	blocked_by = {
		DESTROYER_CLOAKING_2
		DESTROYER_CLOAKING_3
		DESTROYER_CLOAKING_DARK_MATTER
		DESTROYER_CLOAKING_PSI
	}
	size_restriction = { destroyer crisis_destroyer }
	prerequisites = { tech_invisible_rune_fc_dlc }
	component_set = "INVISIBLE_RUNE"
	ai_tags = {
		gunship_stealth
		explosive_stealth
		carrier_stealth
		screen_stealth
		artillery_stealth
		brawler_stealth
		energy_torpedoes_stealth
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 2
			OR = {
				is_preferred_weapons = weapon_type_explosive
				is_preferred_weapons = weapon_type_strike_craft
			}		
		}
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
		inline_script = ship_components/weights/roles_cloaking_devices
	}
}

utility_component_template = {
	key = "CRUISER_INVISIBLE_RUNE"
	size = aux
	icon = "GFX_ship_part_invisible_rune"
	icon_frame = 1
	power = -30
	resources = {
		category = ship_components
		cost = {
			alloys = 20
			rare_crystals = 8
		}
		upkeep = {
			energy = 0.2
			alloys = 0.05
		}
	}

	modifier = {
		ship_cloaking_strength_add = 1
	}

	ship_limit = 1
	blocked_by = {
		CRUISER_CLOAKING_3
		CRUISER_CLOAKING_DARK_MATTER
		CRUISER_CLOAKING_PSI
	}
	size_restriction = { cruiser crisis_cruiser }
	prerequisites = { tech_invisible_rune_fc_dlc }
	component_set = "INVISIBLE_RUNE"
	ai_tags = {
		gunship_stealth
		explosive_stealth
		carrier_stealth
		screen_stealth
		artillery_stealth
		brawler_stealth
		energy_torpedoes_stealth
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 2
			OR = {
				is_preferred_weapons = weapon_type_explosive
				is_preferred_weapons = weapon_type_strike_craft
			}		
		}
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
		inline_script = ship_components/weights/roles_cloaking_devices
	}
}

utility_component_template = {
	key = "BATTLESHIP_INVISIBLE_RUNE"
	size = aux
	icon = "GFX_ship_part_invisible_rune"
	icon_frame = 1
	power = -30
	resources = {
		category = ship_components
		cost = {
			alloys = 20
			rare_crystals = 8
		}
		upkeep = {
			energy = 0.2
			alloys = 0.05
		}
	}

	modifier = {
		ship_cloaking_strength_add = 1
	}

	ship_limit = 1
	blocked_by = {
		BATTLESHIP_CLOAKING_DARK_MATTER
		BATTLESHIP_CLOAKING_PSI
	}
	size_restriction = { battleship titan }
	prerequisites = { tech_invisible_rune_fc_dlc }
	component_set = "INVISIBLE_RUNE"
	ai_tags = {
		gunship_stealth
		explosive_stealth
		carrier_stealth
		screen_stealth
		artillery_stealth
		brawler_stealth
		energy_torpedoes_stealth
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 2
			OR = {
				is_preferred_weapons = weapon_type_explosive
				is_preferred_weapons = weapon_type_strike_craft
			}		
		}
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
		inline_script = ship_components/weights/roles_cloaking_devices
	}
}

utility_component_template = {
	key = "SCIENCE_INVISIBLE_RUNE"
	size = small
	icon = "GFX_ship_part_invisible_rune"
	icon_frame = 1
	power = 0

	modifier = {
		ship_cloaking_strength_add = 3
	}

	size_restriction = { science explorer_vessel observation_station }
	prerequisites = { tech_invisible_rune_fc_dlc }
	component_set = "INVISIBLE_RUNE"

	ai_weight = {
		weight = 10
	}
}

################
#### Dragon ####
################

### Armor
# Bionic Drangonscale Armor
utility_component_template = {
    key = "SMALL_PMT_DRAGONSCALE_1"
	size = small
	icon = "GFX_ship_part_pmt_dragonscale_1"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 20
		}
		upkeep = {
			energy = 0.2
			alloys = 0.04
		}
	}
	modifier = {
	    ship_armor_add = 200
	}
	
	prerequisites = { "tech_pmt_dragonscale_1" }
	component_set = "PMT_DRAGONSCALE_1"
	upgrades_to = "SMALL_PMT_DRAGONSCALE_2"
}

utility_component_template = {
    key = "MEDIUM_PMT_DRAGONSCALE_1"
	size = medium
	icon = "GFX_ship_part_pmt_dragonscale_1"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 40
		}
		upkeep = {
			energy = 0.4
			alloys = 0.08
		}
	}
	modifier = {
	    ship_armor_add = 500
	}
	
	prerequisites = { "tech_pmt_dragonscale_1" }
	component_set = "PMT_DRAGONSCALE_1"
	upgrades_to = "MEDIUM_PMT_DRAGONSCALE_2"
}

utility_component_template = {
    key = "LARGE_PMT_DRAGONSCALE_1"
	size = large
	icon = "GFX_ship_part_pmt_dragonscale_1"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 80
		}
		upkeep = {
			energy = 0.8
			alloys = 0.16
		}
	}
	modifier = {
	    ship_armor_add = 1200
	}
	
	prerequisites = { "tech_pmt_dragonscale_1" }
	component_set = "PMT_DRAGONSCALE_1"
	upgrades_to = "LARGE_PMT_DRAGONSCALE_2"
}

# Reinforced Drangonscale Armor
utility_component_template = {
    key = "SMALL_PMT_DRAGONSCALE_2"
	size = small
	icon = "GFX_ship_part_pmt_dragonscale_2"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 25
		}
		upkeep = {
			energy = 0.25
			alloys = 0.05
		}
	}
	modifier = {
	    ship_armor_add = 300
	}
	
	prerequisites = { "tech_pmt_dragonscale_2" }
	component_set = "PMT_DRAGONSCALE_2"
	upgrades_to = "SMALL_PMT_DRAGONSCALE_3"
}

utility_component_template = {
    key = "MEDIUM_PMT_DRAGONSCALE_2"
	size = medium
	icon = "GFX_ship_part_pmt_dragonscale_2"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 50
		}
		upkeep = {
			energy = 0.5
			alloys = 0.1
		}
	}
	modifier = {
	    ship_armor_add = 750
	}
	
	prerequisites = { "tech_pmt_dragonscale_2" }
	component_set = "PMT_DRAGONSCALE_2"
	upgrades_to = "MEDIUM_PMT_DRAGONSCALE_3"
}

utility_component_template = {
    key = "LARGE_PMT_DRAGONSCALE_2"
	size = large
	icon = "GFX_ship_part_pmt_dragonscale_2"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 100
		}
		upkeep = {
			energy = 1.0
			alloys = 0.2
		}
	}
	modifier = {
	    ship_armor_add = 1800
	}
	
	prerequisites = { "tech_pmt_dragonscale_2" }
	component_set = "PMT_DRAGONSCALE_2"
	upgrades_to = "LARGE_PMT_DRAGONSCALE_3"
}

# Composite Drangonscale Armor
utility_component_template = {
    key = "SMALL_PMT_DRAGONSCALE_3"
	size = small
	icon = "GFX_ship_part_pmt_dragonscale_3"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 30
		}
		upkeep = {
			energy = 0.3
			alloys = 0.06
		}
	}
	modifier = {
		ship_armor_add = 384
		ship_shield_mult = 0.05
	}
	
	prerequisites = { "tech_pmt_dragonscale_3" }
	component_set = "PMT_DRAGONSCALE_3"
}

utility_component_template = {
    key = "MEDIUM_PMT_DRAGONSCALE_3"
	size = medium
	icon = "GFX_ship_part_pmt_dragonscale_3"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 60
		}
		upkeep = {
			energy = 0.6
			alloys = 0.12
		}
	}
	modifier = {
		ship_armor_add = 960
		ship_shield_mult = 0.05
	}
	
	prerequisites = { "tech_pmt_dragonscale_3" }
	component_set = "PMT_DRAGONSCALE_3"
}

utility_component_template = {
    key = "LARGE_PMT_DRAGONSCALE_3"
	size = large
	icon = "GFX_ship_part_pmt_dragonscale_3"
	icon_frame = 1
	power = 0
	resources = {
		category = ship_components
		cost = {
			alloys = 120
		}
		upkeep = {
			energy = 1.2
			alloys = 0.24
		}
	}
	modifier = {
		ship_armor_add = 2304
		ship_shield_mult = 0.05
	}
	
	prerequisites = { "tech_pmt_dragonscale_3" }
	component_set = "PMT_DRAGONSCALE_3"
}


######################
#### Crystal Pony ####
######################

# Princess Amore's Blessing
utility_component_template = {
	key = "PRINCESS_AMORES_BLESSING"
	size = aux
	icon = "GFX_ship_part_princess_amores_blessing"
	icon_frame = 1
	power = -20
	resources = {
		category = ship_components
		cost = {
			alloys = 10
			rare_crystals = 3
		}
	}

	modifier = {
		ship_shield_mult = 0.15
		ship_shield_hardening_add = 0.1
	}

	prerequisites = { "tech_princess_amores_blessing" }
	component_set = "PRINCESS_AMORES_BLESSING"

	ai_weight = {
		weight = 10
		modifier = {
			factor = 2.0
			is_preferred_weapons = weapon_type_energy
		}		
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Crystallization Generator
utility_component_template = {
	key = "CRYSTALLIZATION_GENERATOR"
	size = aux
	icon = "GFX_ship_part_crystallization_generator"
	icon_frame = 1
	power = -10
	resources = {
		category = ship_components
		cost = {
			alloys = 5
			rare_crystals = 4
		}
	}

	modifier = {
		ship_hull_mult = 0.1
		ship_hull_regen_add_perc = 0.3
	}

	prerequisites = { "tech_crystallization_field" }
	component_set = "CRYSTALLIZATION_GENERATOR"

	ai_weight = {
		weight = 10
		modifier = {
			factor = 2.0
			is_preferred_weapons = weapon_type_energy
		}		
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

# Crystal Catalyst
utility_component_template = {
	key = "CRYSTAL_CATALYST"
	size = aux
	icon = "GFX_ship_part_crystal_catalyst"
	icon_frame = 1
	power = -30
	resources = {
		category = ship_components
		cost = {
			alloys = 5
			rare_crystals = 4
		}
	}

	hostile_aura = {
		name = "aura_crystal_catalyst"
		radius = 80
		apply_on = ships

		stack_info = {
			id = hostile_crystal_catalyst
			priority = 1
		}

		modifier = {
			ship_hull_mult = -0.1
		}

		graphics = {
			area_effect = {
				entity = "circle_area_entity"
				dynamic_scale = yes
			}
			ship_effect = {
				entity = "ship_aura_negative_entity"
				dynamic_scale = no
			}
		}
	}

	prerequisites = { "tech_crystal_catalyst" }
	component_set = "CRYSTAL_CATALYST"

	ai_weight = {
		weight = 10
		modifier = {
			factor = 2.0
			is_preferred_weapons = weapon_type_energy
		}		
		modifier = {
			factor = 0
			has_monthly_income = { resource = rare_crystals value <= 0 }
		}
	}
}

### Redo 
# utility_component_template = {
# 	key = "PMT_CRYSTAL_REFLECTOR"
# 	size = aux
# 	icon = "GFX_ship_part_pmt_crystal_reflector"
# 	icon_frame = 1
# 	power = -10
# 	resources = {
# 		category = ship_components
# 		cost = {
# 			alloys = 20
# 			rare_crystals = 1
# 		}
# 	}

# 	modifier = {
# 		weapon_type_energy_weapon_damage_mult = 0.1
# 		weapon_type_energy_weapon_fire_rate_mult = 0.05
# 	}

# 	prerequisites = { "tech_pmt_crystal_reflector" }
# 	component_set = "PMT_CRYSTAL_REFLECTOR"

# 	ai_weight = {
# 		weight = 10
# 		modifier = {
# 			factor = 2.0
# 			is_preferred_weapons = weapon_type_energy
# 		}		
# 		modifier = {
# 			factor = 0
# 			has_monthly_income = { resource = rare_crystals value <= 0 }
# 		}
# 	}
# }

# utility_component_template = {
# 	key = "PMT_CRYSTAL_AMPLIFIER"
# 	size = aux
# 	icon = "GFX_ship_part_pmt_crystal_amplifier"
# 	icon_frame = 1
# 	power = -10
# 	resources = {
# 		category = ship_components
# 		cost = {
# 			alloys = 20
# 			rare_crystals = 1
# 		}
# 	}

# 	modifier = {
# 		ship_shield_mult = 0.15
# 		ship_shield_regen_add_static = 2
# 	}

# 	prerequisites = { "tech_pmt_crystal_amplifier" }
# 	component_set = "PMT_CRYSTAL_AMPLIFIER"

# 	ai_weight = {
# 		weight = 10
# 		modifier = {
# 			factor = 2.0
# 			is_preferred_weapons = weapon_type_energy
# 		}		
# 		modifier = {
# 			factor = 0
# 			has_monthly_income = { resource = rare_crystals value <= 0 }
# 		}
# 	}
# }

##################
### Changeling ###
##################

### Starbase
utility_component_template = {
	key = "STARBASE_CHRYSALIS_STONE"
	size = medium
	icon = "GFX_chrysalis_stone"
	icon_frame = 1
	power = 0

	class_restriction = { shipclass_starbase }

	hostile_aura = {
		name = "aura_starbase_chrysalis_stone"
		system_wide = yes

		stack_info = {
			id = hostile_chrysalis_stone_aura
			priority = 1
		}

		limit = {
			exists = owner
			owner = {
				NOT = { pmt_changeling_species_trigger = yes }
			}
			OR = {
				AND = {
					exists = owner
					owner = { is_machine_empire = yes }
				}
				has_sapient_combat_computer = yes
				has_autonomous_combat_computer = yes
			}
		}

		modifier = {
			ship_weapon_damage = -0.1
			ship_shield_mult = -0.1
			ship_speed_mult = -0.1
		}

		graphics = {
			ship_effect = {
				entity = "ship_aura_negative_entity"
				dynamic_scale = no
			}
		}
	}

	friendly_aura = {
		name = "aura_starbase_chrysalis_stone"
		system_wide = yes

		stack_info = {
			id = hostile_chrysalis_stone_aura
			priority = 1
		}

		limit = {
			exists = owner
			owner = {
				NOT = { pmt_changeling_species_trigger = yes }
			}
		}

		modifier = {
			ship_weapon_damage = -0.1
			ship_shield_mult = -0.1
			ship_speed_mult = -0.1
		}

		graphics = {
			ship_effect = {
				entity = "ship_aura_negative_entity"
				dynamic_scale = no
			}
		}
	}
}

utility_component_template = {
	key = "STARBASE_THE_QUEENS_WILL"
	size = medium
	icon = "GFX_the_queens_wille"
	icon_frame = 1
	power = 0

	class_restriction = { shipclass_starbase }

	hostile_aura = {
		name = "aura_starbase_the_queens_will"
		system_wide = yes

		stack_info = {
			id = hostile_the_queens_will_stone_aura
			priority = 1
		}

		limit = {
			exists = owner
			owner = {
				NOT = { pmt_changeling_species_trigger = yes }
			}
		}

		modifier = {
			ship_weapon_damage = -0.2
			ship_shield_mult = -0.2
			ship_speed_mult = -0.2
		}

		graphics = {
			ship_effect = {
				entity = "ship_aura_negative_entity"
				dynamic_scale = no
			}
		}
	}

	friendly_aura = {
		name = "aura_starbase_the_queens_will"
		system_wide = yes

		stack_info = {
			id = hostile_the_queens_will_stone_aura
			priority = 1
		}

		limit = {
			exists = owner
			owner = {
				NOT = { pmt_changeling_species_trigger = yes }
			}
		}

		modifier = {
			ship_weapon_damage = -0.2
			ship_shield_mult = -0.2
			ship_speed_mult = -0.2
		}

		graphics = {
			ship_effect = {
				entity = "ship_aura_negative_entity"
				dynamic_scale = no
			}
		}
	}
}
